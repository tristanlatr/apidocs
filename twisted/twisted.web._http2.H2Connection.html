<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>twisted.web._http2.H2Connection</title>
    <meta name="generator" content="pydoctor 21.2.2"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.75" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    

    <nav class="navbar navbar-default">
  
  <div class="container">

    <div class="navbar-header">
      
      <div class="navlinks">
        <span class="navbar-brand">
          <a href="https://twistedmatrix.com/" class="projecthome">Twisted</a> <a href="index.html">API Documentation</a>
        </span>

        <a href="moduleIndex.html">
          Modules
        </a>

        <a href="classIndex.html">
          Classes
        </a>

        <a href="nameIndex.html">
          Names
        </a>

        <form action="search-results.html" id="search-box-container">
          <div class="input-group">
            <input id="search-box" name="search-query" placeholder="Search..." aria-label="Search" minlength="2" class="form-control" />
            <span class="input-group-btn">
              <button class="btn btn-default" type="submit" title="Search"><img src="fonts/search.svg" alt="Search!" /></button>
              <a class="btn btn-default" id="search-help-button" title="Help" onclick="toggleSearchHelpText()"><img src="fonts/info.svg" alt="Help!" /></a>
            </span>
          </div>
        </form>

        <div class="rst-admonition hint" id="search-help-box">
          <p class="rst-last">
      
            Search bar offers the following options:
            <ul>   
                <li>
                  <strong>Term presence.</strong> The below example searches for documents that 
                    must contain “foo”, might contain “bar” and must not contain “baz”:
                  <br /> <code>'+foo bar -baz'</code>
                </li> 

                <li>
                  <strong>Wildcards.</strong> The below example searches for documents with words beginning with “foo”:
                  <br /> <code>'foo*'</code>
                </li> 

                <li>
                  <strong>Search in specific fields.</strong> The following search matches all documents 
                  that contains "foo" in their full dotted name and with “bar” in any field:
                  <br /> <code>'+fullName:*foo* +bar'</code>

                  <p>
                    Possible fields: 'name', 'docstring', 'fullName'.
                  </p>
                </li>

                <li>
                  <strong>Fuzzy matches.</strong> The following search matches all documents 
                  that have a word within 1 edit distance of “foo”:
                  <br /> <code>'foo~1'</code>
                </li>
            </ul>

          </p>
        </div>

      </div>


    </div>
  </div>

  <script>
 
    function toggleSearchHelpText() {
        document.body.classList.toggle("search-help-hidden");
    }
    // Init search and help text
    document.getElementById('search-box-container').style.display = 'block';
    document.getElementById('search-help-box').style.display = 'block';
    document.body.classList.add("search-help-hidden");

  </script>

</nav>

    

    <div class="container">

      <div class="page-header">
        <h1 class="class"><code><code><a href="twisted.html">twisted</a></code><wbr></wbr>.<code><a href="twisted.web.html">web</a></code><wbr></wbr>.<code><a href="twisted.web._http2.html">_http2</a></code><wbr></wbr>.<code><a href="twisted.web._http2.H2Connection.html">H2Connection</a></code></code></h1>
        <div id="showPrivate">
          <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
        </div>
      </div>

      <div class="categoryHeader">
        class documentation
      </div>

      <div class="extrasDocstring">
        <p><code><span class="py-keyword">class</span> <span class="py-defname">H2Connection</span>(<a href="twisted.internet.protocol.Protocol.html" title="twisted.internet.protocol.Protocol">Protocol</a>, <a href="twisted.protocols.policies.TimeoutMixin.html" title="twisted.protocols.policies.TimeoutMixin">TimeoutMixin</a>): <a href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L56" class="sourceLink">(source)</a></code></p><p>Implements interfaces: <code><a href="twisted.internet.interfaces.IProtocol.html">twisted.internet.interfaces.IProtocol</a></code>, <code><a href="twisted.internet.interfaces.IPushProducer.html">twisted.internet.interfaces.IPushProducer</a></code></p>
        <p><a href="classIndex.html#twisted.web._http2.H2Connection">View In Hierarchy</a></p>
      </div>

      <div class="moduleDocstring">
        <div><p>A class representing a single HTTP/2 connection.</p><p>This implementation of <code><a href="twisted.internet.interfaces.IProtocol.html">IProtocol</a></code> works hand in hand with <code><a href="twisted.web._http2.H2Stream.html">H2Stream</a></code>. This is because we have the requirement to register multiple producers for a single HTTP/2 connection, one for each stream. The standard Twisted interfaces don't really allow for this, so instead there's a custom interface between the two objects that allows them to work hand-in-hand here.</p></div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id3107">
  
  
  <tr class="method">
    
    <td>Method</td>
    <td><code><a href="#__init__">__init__</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#abortRequest">abortRequest</a></code></td>
    <td><span>Called by <code><a href="twisted.web._http2.H2Stream.html">H2Stream</a></code> objects to request early termination of a stream. This emits a RstStream frame and then removes all stream state.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#connectionLost">connectionLost</a></code></td>
    <td><span>Called when the transport connection is lost.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#connectionMade">connectionMade</a></code></td>
    <td><span>Called by the reactor when a connection is received. May also be called by the <code><a href="twisted.web.http._GenericHTTPChannelProtocol.html">twisted.web.http._GenericHTTPChannelProtocol</a></code> during upgrade to HTTP/2.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#dataReceived">dataReceived</a></code></td>
    <td><span>Called whenever a chunk of data is received from the transport.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#endRequest">endRequest</a></code></td>
    <td><span>Called by <code><a href="twisted.web._http2.H2Stream.html">H2Stream</a></code> objects to signal completion of a response.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#forceAbortClient">forceAbortClient</a></code></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#getHost">getHost</a></code></td>
    <td><span>Similar to getPeer, but returns an address describing this side of the connection.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#getPeer">getPeer</a></code></td>
    <td><span>Get the remote address of this connection.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#openStreamWindow">openStreamWindow</a></code></td>
    <td><span>Open the stream window by a given increment.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#pauseProducing">pauseProducing</a></code></td>
    <td><span>Pause producing data.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#remainingOutboundWindow">remainingOutboundWindow</a></code></td>
    <td><span>Called to determine how much room is left in the send window for a given stream. Allows us to handle blocking and unblocking producers.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#resumeProducing">resumeProducing</a></code></td>
    <td><span>Resume producing data.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#stopProducing">stopProducing</a></code></td>
    <td><span>Stop producing data.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#timeoutConnection">timeoutConnection</a></code></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#writeDataToStream">writeDataToStream</a></code></td>
    <td><span>May be called by <code><a href="twisted.web._http2.H2Stream.html">H2Stream</a></code> objects to write response data to a given stream. Writes a single data frame.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#writeHeaders">writeHeaders</a></code></td>
    <td><span>Called by <code><a href="twisted.web.http.Request.html">twisted.web.http.Request</a></code> objects to write a complete set of HTTP headers to a stream.</span></td>
  </tr><tr class="classvariable">
    
    <td>Class Variable</td>
    <td><code><a href="#factory">factory</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="classvariable">
    
    <td>Class Variable</td>
    <td><code><a href="#site">site</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="#abortTimeout">abortTimeout</a></code></td>
    <td><span>The number of seconds to wait after we attempt to shut the transport down cleanly to give up and forcibly terminate it. This is only used when we time a connection out, to prevent errors causing the FD to get leaked. If this is <code><a href="https://docs.python.org/3/library/constants.html#None">None</a></code>, we will wait forever.</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="#conn">conn</a></code></td>
    <td><span>The HTTP/2 connection state machine.</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="#priority">priority</a></code></td>
    <td><span>A HTTP/2 priority tree used to ensure that responses are prioritised appropriately.</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="#streams">streams</a></code></td>
    <td><span>A mapping of stream IDs to <code><a href="twisted.web._http2.H2Stream.html">H2Stream</a></code> objects, used to call specific methods on streams when events occur.</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_flushBufferedControlData">_flushBufferedControlData</a></code></td>
    <td><span>Called when the connection is marked writable again after being marked unwritable. Attempts to flush buffered control data if there is any.</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_handlePriorityUpdate">_handlePriorityUpdate</a></code></td>
    <td><span>Internal handler for when a stream priority is updated.</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_handleWindowUpdate">_handleWindowUpdate</a></code></td>
    <td><span>Manage flow control windows.</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_isSecure">_isSecure</a></code></td>
    <td><span>Returns <code><a href="https://docs.python.org/3/library/constants.html#True">True</a></code> if this channel is using a secure transport.</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_requestAborted">_requestAborted</a></code></td>
    <td><span>Internal handler for when a request is aborted by a remote peer.</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_requestDataReceived">_requestDataReceived</a></code></td>
    <td><span>Internal handler for when a chunk of data is received for a given request.</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_requestDone">_requestDone</a></code></td>
    <td><span>Called internally by the data sending loop to clean up state that was being used for the stream. Called when the stream is complete.</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_requestEnded">_requestEnded</a></code></td>
    <td><span>Internal handler for when a request is complete, and we expect no further data for that request.</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_requestReceived">_requestReceived</a></code></td>
    <td><span>Internal handler for when a request has been received.</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_respondToBadRequestAndDisconnect">_respondToBadRequestAndDisconnect</a></code></td>
    <td><span>This is a quick and dirty way of responding to bad requests.</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_send100Continue">_send100Continue</a></code></td>
    <td><span>Sends a 100 Continue response, used to signal to clients that further processing will be performed.</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_sendPrioritisedData">_sendPrioritisedData</a></code></td>
    <td><span>The data sending loop. This function repeatedly calls itself, either from <code><a href="twisted.internet.defer.Deferred.html">Deferred</a></code>s or from <code><a href="twisted.internet.interfaces.IReactorTime.html#callLater">reactor.callLater</a></code></span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_streamIsActive">_streamIsActive</a></code></td>
    <td><span>Checks whether Twisted has still got state for a given stream and so can process events for that stream.</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_tryToWriteControlData">_tryToWriteControlData</a></code></td>
    <td><span>Checks whether the connection is blocked on flow control and, if it isn't, writes any buffered control data.</span></td>
  </tr><tr class="classvariable private">
    
    <td>Class Variable</td>
    <td><code><a href="#_log">_log</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_abortingCall">_abortingCall</a></code></td>
    <td><span>The <code><a href="twisted.internet.base.DelayedCall.html">twisted.internet.base.DelayedCall</a></code> that will be used to forcibly close the transport if it doesn't close cleanly.</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_bufferedControlFrameBytes">_bufferedControlFrameBytes</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_bufferedControlFrames">_bufferedControlFrames</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_consumerBlocked">_consumerBlocked</a></code></td>
    <td><span>A flag tracking whether or not the <code><a href="twisted.internet.interfaces.IConsumer.html">IConsumer</a></code> that is consuming this data has asked us to stop producing.</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_maxBufferedControlFrameBytes">_maxBufferedControlFrameBytes</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_outboundStreamQueues">_outboundStreamQueues</a></code></td>
    <td><span>A map of stream IDs to queues, used to store data blocks that are yet to be sent on the connection. These are used both to handle producers that do not respect <code><a href="twisted.internet.interfaces.IConsumer.html">IConsumer</a></code> but also to allow priority to multiplex data appropriately.</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_reactor">_reactor</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_sender">_sender</a></code></td>
    <td><span>A handle to the data-sending loop, allowing it to be terminated if needed.</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_sendingDeferred">_sendingDeferred</a></code></td>
    <td><span>A <code><a href="twisted.internet.defer.Deferred.html">Deferred</a></code> used to restart the data-sending loop when more response data has been produced. Will not be present if there is outstanding data still to send.</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_stillProducing">_stillProducing</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_streamCleanupCallbacks">_streamCleanupCallbacks</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
        
          <p class="inheritedFrom">
            Inherited from <code><a href="twisted.internet.protocol.Protocol.html">Protocol</a></code>:
          </p>
          <table class="children sortable" id="id3108">
  
  
  <tr class="basemethod">
    
    <td>Method</td>
    <td><code><a href="twisted.internet.protocol.Protocol.html#logPrefix">logPrefix</a></code></td>
    <td><span>Return a prefix matching the class name, to identify log messages related to this protocol instance.</span></td>
  </tr>
</table>
          
          <p class="inheritedFrom">
            Inherited from <code><a href="twisted.internet.protocol.BaseProtocol.html">BaseProtocol</a></code> (via <code><a href="twisted.internet.protocol.Protocol.html">Protocol</a></code>):
          </p>
          <table class="children sortable" id="id3109">
  
  
  <tr class="basemethod">
    
    <td>Method</td>
    <td><code><a href="twisted.internet.protocol.BaseProtocol.html#makeConnection">makeConnection</a></code></td>
    <td><span>Make a connection to a transport and a server.</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="twisted.internet.protocol.BaseProtocol.html#connected">connected</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="twisted.internet.protocol.BaseProtocol.html#transport">transport</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
          
          <p class="inheritedFrom">
            Inherited from <code><a href="twisted.protocols.policies.TimeoutMixin.html">TimeoutMixin</a></code>:
          </p>
          <table class="children sortable" id="id3110">
  
  
  <tr class="basemethod">
    
    <td>Method</td>
    <td><code><a href="twisted.protocols.policies.TimeoutMixin.html#callLater">callLater</a></code></td>
    <td><span>Wrapper around <code><a href="twisted.internet.interfaces.IReactorTime.html#callLater">reactor.callLater</a></code> for test purpose.</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><code><a href="twisted.protocols.policies.TimeoutMixin.html#resetTimeout">resetTimeout</a></code></td>
    <td><span>Reset the timeout count down.</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><code><a href="twisted.protocols.policies.TimeoutMixin.html#setTimeout">setTimeout</a></code></td>
    <td><span>Change the timeout period</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="twisted.protocols.policies.TimeoutMixin.html#timeOut">timeOut</a></code></td>
    <td><span>The number of seconds after which to timeout the connection.</span></td>
  </tr><tr class="basemethod private">
    
    <td>Method</td>
    <td><code><a href="twisted.protocols.policies.TimeoutMixin.html#__timedOut">__timedOut</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseinstancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="twisted.protocols.policies.TimeoutMixin.html#__timeoutCall">__timeoutCall</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
          

          
      </div>

      <div id="childList">

        <div class="basemethod">
  
  
  <a name="twisted.web._http2.H2Connection.__init__">
    
  </a>
  <a name="__init__">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">__init__</span>(self, reactor=None):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L117">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.web._http2.H2Connection.abortRequest">
    
  </a>
  <a name="abortRequest">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">abortRequest</span>(self, streamID):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L602">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Called by <code><a href="twisted.web._http2.H2Stream.html">H2Stream</a></code> objects to request early termination of a stream. This emits a RstStream frame and then removes all stream state.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">streamID:</span><code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code></td><td class="fieldArgDesc">The ID of the stream to write the data to.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.web._http2.H2Connection.connectionLost">
    
  </a>
  <a name="connectionLost">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">connectionLost</span>(self, reason, _cancelTimeouts=True):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L249">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">from <code><a href="twisted.internet.interfaces.IProtocol.html#connectionLost">twisted.internet.interfaces.IProtocol</a></code></div><div class="interfaceinfo">overrides <code><a href="twisted.internet.protocol.Protocol.html#connectionLost">twisted.internet.protocol.Protocol.connectionLost</a></code></div>
    
    <div><p>Called when the transport connection is lost.</p><p>Informs all outstanding response handlers that the connection has been lost, and cleans up all internal state.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">reason</span></td><td class="fieldArgDesc">See <code><a href="twisted.internet.interfaces.IProtocol.html#connectionLost">IProtocol.connectionLost</a></code></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">_cancelTimeouts</span></td><td class="fieldArgDesc">Propagate the <code>reason</code> to this connection's streams but don't cancel any timers, so that peers who never read the data we've written are eventually timed out.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.web._http2.H2Connection.connectionMade">
    
  </a>
  <a name="connectionMade">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">connectionMade</span>(self):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L143">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">from <code><a href="twisted.internet.interfaces.IProtocol.html#connectionMade">twisted.internet.interfaces.IProtocol</a></code></div><div class="interfaceinfo">overrides <code><a href="twisted.internet.protocol.BaseProtocol.html#connectionMade">twisted.internet.protocol.BaseProtocol.connectionMade</a></code></div>
    
    <div><p>Called by the reactor when a connection is received. May also be called by the <code><a href="twisted.web.http._GenericHTTPChannelProtocol.html">twisted.web.http._GenericHTTPChannelProtocol</a></code> during upgrade to HTTP/2.</p></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.web._http2.H2Connection.dataReceived">
    
  </a>
  <a name="dataReceived">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">dataReceived</span>(self, data):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L153">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">from <code><a href="twisted.internet.interfaces.IProtocol.html#dataReceived">twisted.internet.interfaces.IProtocol</a></code></div><div class="interfaceinfo">overrides <code><a href="twisted.internet.protocol.Protocol.html#dataReceived">twisted.internet.protocol.Protocol.dataReceived</a></code></div>
    
    <div><p>Called whenever a chunk of data is received from the transport.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">data:</span><code><a href="https://docs.python.org/3/library/stdtypes.html#bytes">bytes</a></code></td><td class="fieldArgDesc">The data received from the transport.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.web._http2.H2Connection.endRequest">
    
  </a>
  <a name="endRequest">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">endRequest</span>(self, streamID):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L588">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Called by <code><a href="twisted.web._http2.H2Stream.html">H2Stream</a></code> objects to signal completion of a response.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">streamID:</span><code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code></td><td class="fieldArgDesc">The ID of the stream to write the data to.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.web._http2.H2Connection.forceAbortClient">
    
  </a>
  <a name="forceAbortClient">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">forceAbortClient</span>(self):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L234">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Called if <code>abortTimeout</code> seconds have passed since the timeout fired, and the connection still hasn't gone away. This can really only happen on extremely bad connections or when clients are maliciously attempting to keep connections open.</p></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.web._http2.H2Connection.getHost">
    
  </a>
  <a name="getHost">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">getHost</span>(self):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L701">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Similar to getPeer, but returns an address describing this side of the connection.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td colspan="2">An <code><a href="twisted.internet.interfaces.IAddress.html">IAddress</a></code> provider.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.web._http2.H2Connection.getPeer">
    
  </a>
  <a name="getPeer">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">getPeer</span>(self):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L688">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Get the remote address of this connection.</p><p>Treat this method with caution.  It is the unfortunate result of the CGI and Jabber standards, but should not be considered reliable for the usual host of reasons; port forwarding, proxying, firewalls, IP masquerading, etc.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td colspan="2">An <code><a href="twisted.internet.interfaces.IAddress.html">IAddress</a></code> provider.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.web._http2.H2Connection.openStreamWindow">
    
  </a>
  <a name="openStreamWindow">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">openStreamWindow</span>(self, streamID, increment):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L710">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Open the stream window by a given increment.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">streamID:</span><code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code></td><td class="fieldArgDesc">The ID of the stream whose window needs to be opened.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">increment:</span><code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code></td><td class="fieldArgDesc">The amount by which the stream window must be incremented.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.web._http2.H2Connection.pauseProducing">
    
  </a>
  <a name="pauseProducing">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">pauseProducing</span>(self):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L332">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">from <code><a href="twisted.internet.interfaces.IPushProducer.html#pauseProducing">twisted.internet.interfaces.IPushProducer</a></code></div>
    
    <div><p>Pause producing data.</p><p>Tells the <code><a href="twisted.web._http2.H2Connection.html">H2Connection</a></code> that it has produced too much data to process for the time being, and to stop until resumeProducing() is called.</p></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.web._http2.H2Connection.remainingOutboundWindow">
    
  </a>
  <a name="remainingOutboundWindow">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">remainingOutboundWindow</span>(self, streamID):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L629">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Called to determine how much room is left in the send window for a given stream. Allows us to handle blocking and unblocking producers.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">streamID:</span><code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code></td><td class="fieldArgDesc">The ID of the stream whose flow control window we'll check.</td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code></td><td class="fieldArgDesc">The amount of room remaining in the send window for the given stream, including the data queued to be sent.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.web._http2.H2Connection.resumeProducing">
    
  </a>
  <a name="resumeProducing">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">resumeProducing</span>(self):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L343">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">from <code><a href="twisted.internet.interfaces.IPushProducer.html#resumeProducing">twisted.internet.interfaces.IPushProducer</a></code></div>
    
    <div><p>Resume producing data.</p><p>This tells the <code><a href="twisted.web._http2.H2Connection.html">H2Connection</a></code> to re-add itself to the main loop and produce more data for the consumer.</p></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.web._http2.H2Connection.stopProducing">
    
  </a>
  <a name="stopProducing">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">stopProducing</span>(self):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L323">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">from <code><a href="twisted.internet.interfaces.IProducer.html#stopProducing">twisted.internet.interfaces.IProducer</a></code></div>
    
    <div><p>Stop producing data.</p><p>This tells the <code><a href="twisted.web._http2.H2Connection.html">H2Connection</a></code> that its consumer has died, so it must stop producing data for good.</p></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.web._http2.H2Connection.timeoutConnection">
    
  </a>
  <a name="timeoutConnection">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">timeoutConnection</span>(self):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L195">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overrides <code><a href="twisted.protocols.policies.TimeoutMixin.html#timeoutConnection">twisted.protocols.policies.TimeoutMixin.timeoutConnection</a></code></div>
    
    <div><p>Called when the connection has been inactive for <code><a href="twisted.protocols.policies.TimeoutMixin.html#timeOut">self.timeOut</a></code> seconds. Cleanly tears the connection down, attempting to notify the peer if needed.</p><p>We override this method to add two extra bits of functionality:</p><ul><li>We want to log the timeout.</li><li>We want to send a GOAWAY frame indicating that the connection is being terminated, and whether it was clean or not. We have to do this before the connection is torn down.</li></ul></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.web._http2.H2Connection.writeDataToStream">
    
  </a>
  <a name="writeDataToStream">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">writeDataToStream</span>(self, streamID, data):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L562">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>May be called by <code><a href="twisted.web._http2.H2Stream.html">H2Stream</a></code> objects to write response data to a given stream. Writes a single data frame.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">streamID:</span><code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code></td><td class="fieldArgDesc">The ID of the stream to write the data to.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">data:</span><code><a href="https://docs.python.org/3/library/stdtypes.html#bytes">bytes</a></code></td><td class="fieldArgDesc">The data chunk to write to the stream.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.web._http2.H2Connection.writeHeaders">
    
  </a>
  <a name="writeHeaders">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">writeHeaders</span>(self, version, code, reason, headers, streamID):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L530">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Called by <code><a href="twisted.web.http.Request.html">twisted.web.http.Request</a></code> objects to write a complete set of HTTP headers to a stream.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">version:</span><code><a href="https://docs.python.org/3/library/stdtypes.html#bytes">bytes</a></code></td><td class="fieldArgDesc">The HTTP version in use. Unused in HTTP/2.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">code:</span><code><a href="https://docs.python.org/3/library/stdtypes.html#bytes">bytes</a></code></td><td class="fieldArgDesc">The HTTP status code to write.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">reason:</span><code><a href="https://docs.python.org/3/library/stdtypes.html#bytes">bytes</a></code></td><td class="fieldArgDesc">The HTTP reason phrase to write. Unused in HTTP/2.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">headers:</span><code><a href="twisted.web.http_headers.Headers.html">twisted.web.http_headers.Headers</a></code></td><td class="fieldArgDesc">The headers to write to the stream.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">streamID:</span><code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code></td><td class="fieldArgDesc">The ID of the stream to write the headers to.</td></tr></table></div>
  </div>
</div><div class="baseclassvariable">
  
  
  <a name="twisted.web._http2.H2Connection.factory">
    
  </a>
  <a name="factory">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">factory</span> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L110">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    <div class="interfaceinfo">overrides <code><a href="twisted.internet.protocol.Protocol.html#factory">twisted.internet.protocol.Protocol.factory</a></code></div>
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="baseclassvariable">
  
  
  <a name="twisted.web._http2.H2Connection.site">
    
  </a>
  <a name="site">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">site</span> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L111">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="baseinstancevariable">
  
  
  <a name="twisted.web._http2.H2Connection.abortTimeout">
    
  </a>
  <a name="abortTimeout">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">abortTimeout</span>: <code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L99">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div>The number of seconds to wait after we attempt to shut the transport down cleanly to give up and forcibly terminate it. This is only used when we time a connection out, to prevent errors causing the FD to get leaked. If this is <code><a href="https://docs.python.org/3/library/constants.html#None">None</a></code>, we will wait forever.</div>
  </div>
</div><div class="baseinstancevariable">
  
  
  <a name="twisted.web._http2.H2Connection.conn">
    
  </a>
  <a name="conn">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">conn</span>: <code><a href="https://hyper-h2.readthedocs.io/en/stable/api.html#h2.connection.H2Connection">h2.connection.H2Connection</a></code> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L67">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div>The HTTP/2 connection state machine.</div>
  </div>
</div><div class="baseinstancevariable">
  
  
  <a name="twisted.web._http2.H2Connection.priority">
    
  </a>
  <a name="priority">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">priority</span>: <code><a href="https://priority.readthedocs.io/en/stable/api.html#priority.PriorityTree">priority.PriorityTree</a></code> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L74">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div>A HTTP/2 priority tree used to ensure that responses are prioritised appropriately.</div>
  </div>
</div><div class="baseinstancevariable">
  
  
  <a name="twisted.web._http2.H2Connection.streams">
    
  </a>
  <a name="streams">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">streams</span>: <code><a href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code>, mapping <code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code> stream IDs to <code><a href="twisted.web._http2.H2Stream.html">H2Stream</a></code> objects. =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L70">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div>A mapping of stream IDs to <code><a href="twisted.web._http2.H2Stream.html">H2Stream</a></code> objects, used to call specific methods on streams when events occur.</div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="twisted.web._http2.H2Connection._flushBufferedControlData">
    
  </a>
  <a name="_flushBufferedControlData">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_flushBufferedControlData</span>(self, *args):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L829">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Called when the connection is marked writable again after being marked unwritable. Attempts to flush buffered control data if there is any.</p></div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="twisted.web._http2.H2Connection._handlePriorityUpdate">
    
  </a>
  <a name="_handlePriorityUpdate">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_handlePriorityUpdate</span>(self, event):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L503">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Internal handler for when a stream priority is updated.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">event:</span><code><a href="https://hyper-h2.readthedocs.io/en/stable/api.html#h2.events.PriorityUpdated">h2.events.PriorityUpdated</a></code></td><td class="fieldArgDesc">The Hyper-h2 event that encodes information about the stream reprioritization.</td></tr></table></div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="twisted.web._http2.H2Connection._handleWindowUpdate">
    
  </a>
  <a name="_handleWindowUpdate">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_handleWindowUpdate</span>(self, event):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L652">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Manage flow control windows.</p><p>Streams that are blocked on flow control will register themselves with the connection. This will fire deferreds that wake those streams up and allow them to continue processing.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">event:</span><code><a href="https://hyper-h2.readthedocs.io/en/stable/api.html#h2.events.WindowUpdated">h2.events.WindowUpdated</a></code></td><td class="fieldArgDesc">The Hyper-h2 event that encodes information about the flow control window change.</td></tr></table></div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="twisted.web._http2.H2Connection._isSecure">
    
  </a>
  <a name="_isSecure">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_isSecure</span>(self):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L724">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Returns <code><a href="https://docs.python.org/3/library/constants.html#True">True</a></code> if this channel is using a secure transport.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></code></td><td class="fieldArgDesc"><code><a href="https://docs.python.org/3/library/constants.html#True">True</a></code> if this channel is secure.</td></tr></table></div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="twisted.web._http2.H2Connection._requestAborted">
    
  </a>
  <a name="_requestAborted">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_requestAborted</span>(self, event):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L489">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Internal handler for when a request is aborted by a remote peer.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">event:</span><code><a href="https://hyper-h2.readthedocs.io/en/stable/api.html#h2.events.StreamReset">h2.events.StreamReset</a></code></td><td class="fieldArgDesc">The Hyper-h2 event that encodes information about the reset stream.</td></tr></table></div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="twisted.web._http2.H2Connection._requestDataReceived">
    
  </a>
  <a name="_requestDataReceived">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_requestDataReceived</span>(self, event):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L465">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Internal handler for when a chunk of data is received for a given request.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">event:</span><code><a href="https://hyper-h2.readthedocs.io/en/stable/api.html#h2.events.DataReceived">h2.events.DataReceived</a></code></td><td class="fieldArgDesc">The Hyper-h2 event that encodes information about the received data.</td></tr></table></div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="twisted.web._http2.H2Connection._requestDone">
    
  </a>
  <a name="_requestDone">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_requestDone</span>(self, streamID):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L615">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Called internally by the data sending loop to clean up state that was being used for the stream. Called when the stream is complete.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">streamID:</span><code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code></td><td class="fieldArgDesc">The ID of the stream to clean up state for.</td></tr></table></div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="twisted.web._http2.H2Connection._requestEnded">
    
  </a>
  <a name="_requestEnded">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_requestEnded</span>(self, event):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L477">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Internal handler for when a request is complete, and we expect no further data for that request.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">event:</span><code><a href="https://hyper-h2.readthedocs.io/en/stable/api.html#h2.events.StreamEnded">h2.events.StreamEnded</a></code></td><td class="fieldArgDesc">The Hyper-h2 event that encodes information about the completed stream.</td></tr></table></div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="twisted.web._http2.H2Connection._requestReceived">
    
  </a>
  <a name="_requestReceived">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_requestReceived</span>(self, event):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L434">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Internal handler for when a request has been received.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">event:</span><code><a href="https://hyper-h2.readthedocs.io/en/stable/api.html#h2.events.RequestReceived">h2.events.RequestReceived</a></code></td><td class="fieldArgDesc">The Hyper-h2 event that encodes information about the received request.</td></tr></table></div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="twisted.web._http2.H2Connection._respondToBadRequestAndDisconnect">
    
  </a>
  <a name="_respondToBadRequestAndDisconnect">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_respondToBadRequestAndDisconnect</span>(self, streamID):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L747">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>This is a quick and dirty way of responding to bad requests.</p><p>As described by HTTP standard we should be patient and accept the whole request from the client before sending a polite bad request response, even in the case when clients send tons of data.</p><p>Unlike in the HTTP/1.1 case, this does not actually disconnect the underlying transport: there's no need. This instead just sends a 400 response and terminates the stream.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">streamID:</span><code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code></td><td class="fieldArgDesc">The ID of the stream that needs the 100 Continue response</td></tr></table></div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="twisted.web._http2.H2Connection._send100Continue">
    
  </a>
  <a name="_send100Continue">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_send100Continue</span>(self, streamID):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L734">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Sends a 100 Continue response, used to signal to clients that further processing will be performed.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">streamID:</span><code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code></td><td class="fieldArgDesc">The ID of the stream that needs the 100 Continue response</td></tr></table></div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="twisted.web._http2.H2Connection._sendPrioritisedData">
    
  </a>
  <a name="_sendPrioritisedData">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_sendPrioritisedData</span>(self, *args):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L355">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>The data sending loop. This function repeatedly calls itself, either from <code><a href="twisted.internet.defer.Deferred.html">Deferred</a></code>s or from <code><a href="twisted.internet.interfaces.IReactorTime.html#callLater">reactor.callLater</a></code></p><p>This function sends data on streams according to the rules of HTTP/2 priority. It ensures that the data from each stream is interleved according to the priority signalled by the client, making sure that the connection is used with maximal efficiency.</p><p>This function will execute if data is available: if all data is exhausted, the function will place a deferred onto the <code><a href="twisted.web._http2.H2Connection.html">H2Connection</a></code> object and wait until it is called to resume executing.</p></div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="twisted.web._http2.H2Connection._streamIsActive">
    
  </a>
  <a name="_streamIsActive">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_streamIsActive</span>(self, streamID):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L771">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Checks whether Twisted has still got state for a given stream and so can process events for that stream.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">streamID:</span><code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code></td><td class="fieldArgDesc">The ID of the stream that needs processing.</td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></code></td><td class="fieldArgDesc">Whether the stream still has state allocated.</td></tr></table></div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="twisted.web._http2.H2Connection._tryToWriteControlData">
    
  </a>
  <a name="_tryToWriteControlData">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_tryToWriteControlData</span>(self):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L784">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Checks whether the connection is blocked on flow control and, if it isn't, writes any buffered control data.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td colspan="2"><code><a href="https://docs.python.org/3/library/constants.html#True">True</a></code> if the connection is still active and <code><a href="https://docs.python.org/3/library/constants.html#False">False</a></code> if it was aborted because too many bytes have been written but not consumed by the other end.</td></tr></table></div>
  </div>
</div><div class="baseclassvariable private">
  
  
  <a name="twisted.web._http2.H2Connection._log">
    
  </a>
  <a name="_log">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_log</span> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L114">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="twisted.web._http2.H2Connection._abortingCall">
    
  </a>
  <a name="_abortingCall">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_abortingCall</span>: <code><a href="twisted.internet.base.DelayedCall.html">twisted.internet.base.DelayedCall</a></code> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L105">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div>The <code><a href="twisted.internet.base.DelayedCall.html">twisted.internet.base.DelayedCall</a></code> that will be used to forcibly close the transport if it doesn't close cleanly.</div>
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="twisted.web._http2.H2Connection._bufferedControlFrameBytes">
    
  </a>
  <a name="_bufferedControlFrameBytes">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_bufferedControlFrameBytes</span>: <code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L133">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="twisted.web._http2.H2Connection._bufferedControlFrames">
    
  </a>
  <a name="_bufferedControlFrames">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_bufferedControlFrames</span> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L132">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="twisted.web._http2.H2Connection._consumerBlocked">
    
  </a>
  <a name="_consumerBlocked">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_consumerBlocked</span>: A <code><a href="twisted.internet.defer.Deferred.html">twisted.internet.defer.Deferred</a></code>, or <code><a href="https://docs.python.org/3/library/constants.html#None">None</a></code> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L78">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div>A flag tracking whether or not the <code><a href="twisted.internet.interfaces.IConsumer.html">IConsumer</a></code> that is consuming this data has asked us to stop producing.</div>
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="twisted.web._http2.H2Connection._maxBufferedControlFrameBytes">
    
  </a>
  <a name="_maxBufferedControlFrameBytes">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_maxBufferedControlFrameBytes</span> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L131">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="twisted.web._http2.H2Connection._outboundStreamQueues">
    
  </a>
  <a name="_outboundStreamQueues">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_outboundStreamQueues</span>: A <code><a href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code> mapping <code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code> stream IDs to <code><a href="https://docs.python.org/3/library/collections.html#collections.deque">collections.deque</a></code> queues, which contain either <code><a href="https://docs.python.org/3/library/stdtypes.html#bytes">bytes</a></code> objects or <code>_END_STREAM_SENTINEL</code>. =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L87">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div>A map of stream IDs to queues, used to store data blocks that are yet to be sent on the connection. These are used both to handle producers that do not respect <code><a href="twisted.internet.interfaces.IConsumer.html">IConsumer</a></code> but also to allow priority to multiplex data appropriately.</div>
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="twisted.web._http2.H2Connection._reactor">
    
  </a>
  <a name="_reactor">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_reactor</span> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L137">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="twisted.web._http2.H2Connection._sender">
    
  </a>
  <a name="_sender">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_sender</span>: <code><a href="twisted.internet.task.LoopingCall.html">twisted.internet.task.LoopingCall</a></code> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L95">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div>A handle to the data-sending loop, allowing it to be terminated if needed.</div>
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="twisted.web._http2.H2Connection._sendingDeferred">
    
  </a>
  <a name="_sendingDeferred">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_sendingDeferred</span> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L82">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div>A <code><a href="twisted.internet.defer.Deferred.html">Deferred</a></code> used to restart the data-sending loop when more response data has been produced. Will not be present if there is outstanding data still to send.</div>
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="twisted.web._http2.H2Connection._stillProducing">
    
  </a>
  <a name="_stillProducing">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_stillProducing</span>: <code><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></code> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L127">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="twisted.web._http2.H2Connection._streamCleanupCallbacks">
    
  </a>
  <a name="_streamCleanupCallbacks">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_streamCleanupCallbacks</span>: <code><a href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></code> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/web/_http2.py#L126">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div>

      </div>
    </div>

    <footer class="navbar navbar-default">
  
  <div class="container">
    <a href="index.html">API Documentation</a> for <a href="https://twistedmatrix.com/" class="projecthome">Twisted</a>,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    21.2.2 at 2022-01-12 04:22:24.
  </div>
</footer>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>