<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>twisted.application.internet.ClientService</title>
    <meta name="generator" content="pydoctor 22.2.2.dev0"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.75" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    <div style="display: none" id="current-docs-container" class="container">
  <div class="col-sm-12">
    <a id="current-docs-link">
      Go to the latest version of this document.
    </a>
  </div>
</div>

    <nav class="navbar navbar-default">
  
  <div class="container">

    <div class="navbar-header">
      
      <div class="navlinks">
        <span class="navbar-brand">
          <a href="https://twistedmatrix.com/" class="projecthome">Twisted</a> <a href="index.html">API Documentation</a>
        </span>

        <a href="moduleIndex.html">
          Modules
        </a>

        <a href="classIndex.html">
          Classes
        </a>

        <a href="nameIndex.html">
          Names
        </a>

        <div id="search-box-container">
          <div class="input-group">
            <input id="search-box" type="search" name="search-query" placeholder="Search..." aria-label="Search" minlength="2" class="form-control" autocomplete="off" />
            
            <span class="input-group-btn">
              <a style="display: none;" class="btn btn-default" id="search-clear-button" title="Clear" onclick="clearSearch()"><img src="fonts/x-circle.svg" alt="Clear" /></a>
              <a class="btn btn-default" id="search-help-button" title="Help" onclick="toggleSearchHelpText()"><img src="fonts/info.svg" alt="Help" /></a>
            </span>
          </div>
        </div>

      </div>

      <div id="search-results-container" style="display: none;">
        <div>
          <span class="label label-default" id="search-docstrings-button">
            <a title="Search in docstrings" onclick="toggleSearchInDocstrings()">search in docstrings</a></span>
        </div>

        <noscript>
            <h1>Cannot search: JavaScript is not supported/enabled in your browser.</h1>
        </noscript>

        <div class="hint" id="search-help-box">
          <p class="rst-last">
      
            Search bar offers the following options:
            <ul>   
                <li>
                  <strong>Term presence.</strong> The below example searches for documents that 
                    must contain “foo”, might contain “bar” and must not contain “baz”: <code>+foo bar -baz</code>
                </li> 

                <li>
                  <strong>Wildcards.</strong> The below example searches for documents with words beginning with “foo”: <code>foo*</code>
                </li> 

                <li>
                  <strong>Search in specific fields.</strong> The following search matches all objects 
                  in "twisted.mail" that matches “search”: <code>+qname:twisted.mail.* +search</code>

                  <p>
                    Possible fields: 'name', 'qname' (fully qualified name), 'docstring', and 'kind'.
                    Last two fields are only applicable if "search in docstrings" is enabled.
                  </p>
                </li>

                <li>
                  <strong>Fuzzy matches.</strong> The following search matches all documents 
                  that have a word within 1 edit distance of “foo”: <code>foo~1</code>
                </li>
            </ul>

          </p>
        </div>

        <div id="search-status"> </div>
        
        <div class="warning" id="search-warn-box" style="display: none;">
          <p class="rst-last"><span id="search-warn"></span></p>
        </div>

        <table id="search-results">
          <!-- Filled dynamically by JS -->
        </table>
        
        <div style="margin-top: 8px;">
          <p>Results provided by <a href="https://lunrjs.com">Lunr.js</a></p>
        </div>
      </div>

    </div>
  </div>

  <script src="ajax.js" type="text/javascript"></script>
  <script src="search.js" type="text/javascript"></script>

</nav>

    

    <div class="container">

      <div class="page-header">
        <h1 class="class"><code><code><a href="index.html" class="internal-link">twisted</a></code><wbr></wbr>.<code><a href="twisted.application.html" class="internal-link" title="twisted.application">application</a></code><wbr></wbr>.<code><a href="twisted.application.internet.html" class="internal-link" title="twisted.application.internet">internet</a></code><wbr></wbr>.<code><a href="twisted.application.internet.ClientService.html" class="internal-link" title="twisted.application.internet.ClientService">ClientService</a></code></code></h1>
        <div id="showPrivate">
          <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
        </div>
      </div>

      <div class="categoryHeader">
        class documentation
      </div>

      <div class="extrasDocstring">
        <p><code><span class="py-keyword">class</span> <span class="py-defname">ClientService</span>(<a href="twisted.application.service.Service.html" class="internal-link" title="twisted.application.service.Service">service.Service</a>): <a href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/application/internet.py#L1073" class="sourceLink">(source)</a></code></p>
        <p><a href="classIndex.html#twisted.application.internet.ClientService">View In Hierarchy</a></p>
      </div>

      

      <div class="moduleDocstring">
        <div>A <code><a href="twisted.application.internet.ClientService.html" class="internal-link" title="twisted.application.internet.ClientService">ClientService</a></code> maintains a single outgoing connection to a client endpoint, reconnecting after a configurable timeout when a connection fails, either before or after connecting.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Present Since</td></tr><tr><td colspan="2">16.1.0</td></tr></table></div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id90">
  
  
  <tr class="method">
    
    <td>Method</td>
    <td><code><a href="#__init__" class="internal-link" title="twisted.application.internet.ClientService.__init__">__init__</a></code></td>
    <td></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#startService" class="internal-link" title="twisted.application.internet.ClientService.startService">start​Service</a></code></td>
    <td>Start this <code><a href="twisted.application.internet.ClientService.html" class="internal-link" title="twisted.application.internet.ClientService">ClientService</a></code>, initiating the connection retry loop.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#stopService" class="internal-link" title="twisted.application.internet.ClientService.stopService">stop​Service</a></code></td>
    <td>Stop attempting to reconnect and close any existing connections.</td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#whenConnected" class="internal-link" title="twisted.application.internet.ClientService.whenConnected">when​Connected</a></code></td>
    <td>Retrieve the currently-connected <code><a href="twisted.internet.protocol.Protocol.html" class="internal-link" title="twisted.internet.protocol.Protocol">Protocol</a></code>, or the next one to connect.</td>
  </tr><tr class="classvariable private">
    
    <td>Class Variable</td>
    <td><code><a href="#_log" class="internal-link" title="twisted.application.internet.ClientService._log">_log</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_machine" class="internal-link" title="twisted.application.internet.ClientService._machine">_machine</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
        
          <p class="inheritedFrom">
            Inherited from <code><a href="twisted.application.service.Service.html" class="internal-link" title="twisted.application.service.Service">Service</a></code>:
          </p>
          <table class="children sortable" id="id91">
  
  
  <tr class="basemethod">
    
    <td>Method</td>
    <td><code><a href="twisted.application.service.Service.html#__getstate__" class="internal-link" title="twisted.application.service.Service.__getstate__">__getstate__</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><code><a href="twisted.application.service.Service.html#disownServiceParent" class="internal-link" title="twisted.application.service.Service.disownServiceParent">disown​Service​Parent</a></code></td>
    <td>Use this API to remove an <code><a href="twisted.application.service.IService.html" class="internal-link" title="twisted.application.service.IService">IService</a></code> from an <code><a href="twisted.application.service.IServiceCollection.html" class="internal-link" title="twisted.application.service.IServiceCollection">IServiceCollection</a></code>.</td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><code><a href="twisted.application.service.Service.html#privilegedStartService" class="internal-link" title="twisted.application.service.Service.privilegedStartService">privileged​Start​Service</a></code></td>
    <td>Do preparation work for starting the service.</td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><code><a href="twisted.application.service.Service.html#setName" class="internal-link" title="twisted.application.service.Service.setName">set​Name</a></code></td>
    <td>Set the name of the service.</td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><code><a href="twisted.application.service.Service.html#setServiceParent" class="internal-link" title="twisted.application.service.Service.setServiceParent">set​Service​Parent</a></code></td>
    <td>Set the parent of the service.  This method is responsible for setting the <tt class="rst-docutils literal">parent</tt> attribute on this service (the child service).</td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="twisted.application.service.Service.html#name" class="internal-link" title="twisted.application.service.Service.name">name</a></code></td>
    <td>A <tt class="rst-docutils literal">str</tt> which is the name of the service or <tt class="rst-docutils literal">None</tt>.</td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="twisted.application.service.Service.html#parent" class="internal-link" title="twisted.application.service.Service.parent">parent</a></code></td>
    <td>An <tt class="rst-docutils literal">IServiceCollection</tt> which is the parent or <tt class="rst-docutils literal">None</tt>.</td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="twisted.application.service.Service.html#running" class="internal-link" title="twisted.application.service.Service.running">running</a></code></td>
    <td>A <tt class="rst-docutils literal">boolean</tt> which indicates whether the service is running.</td>
  </tr>
</table>
          

          
      </div>

      <div id="childList">

        <div class="basemethod">
  
  
  <a name="twisted.application.internet.ClientService.__init__">
    
  </a>
  <a name="__init__">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">__init__</span>(self, endpoint, factory, retryPolicy=<a href="https://docs.python.org/3/library/constants.html#None" class="intersphinx-link">None</a>, clock=<a href="https://docs.python.org/3/library/constants.html#None" class="intersphinx-link">None</a>, prepareConnection=<a href="https://docs.python.org/3/library/constants.html#None" class="intersphinx-link">None</a>):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/application/internet.py#L1084">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">endpoint</span></td><td class="fieldArgDesc">A <code><a href="twisted.internet.interfaces.IStreamClientEndpoint.html" class="internal-link" title="twisted.internet.interfaces.IStreamClientEndpoint">stream client endpoint</a></code> provider which will be used to connect when the service starts.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">factory</span></td><td class="fieldArgDesc">A <code><a href="twisted.internet.interfaces.IProtocolFactory.html" class="internal-link" title="twisted.internet.interfaces.IProtocolFactory">protocol factory</a></code> which will be used to create clients for the endpoint.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">retry​Policy:</span>callable taking (the number of failed connection attempts made in a row (<code><a href="https://docs.python.org/3/library/functions.html#int" class="intersphinx-link">int</a></code>)) and returning the number of seconds to wait before making another attempt.</td><td class="fieldArgDesc">A policy configuring how long <code><a href="twisted.application.internet.ClientService.html" class="internal-link" title="twisted.application.internet.ClientService">ClientService</a></code> will wait between attempts to connect to <tt class="rst-docutils literal">endpoint</tt>.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">clock:</span><code><a href="twisted.internet.interfaces.IReactorTime.html" class="internal-link" title="twisted.internet.interfaces.IReactorTime">IReactorTime</a></code></td><td class="fieldArgDesc">The clock used to schedule reconnection.  It's mainly useful to be parametrized in tests.  If the factory is serialized, this attribute will not be serialized, and the default value (the reactor) will be restored when deserialized.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">prepare​Connection:</span><code><a href="https://docs.python.org/3/library/functions.html#callable" class="intersphinx-link">callable</a></code></td><td class="fieldArgDesc"><p>A single argument <code><a href="https://docs.python.org/3/library/functions.html#callable" class="intersphinx-link">callable</a></code> that may return a <code><a href="twisted.internet.defer.Deferred.html" class="internal-link" title="twisted.internet.defer.Deferred">Deferred</a></code>. It will be called once with the <code><a href="twisted.internet.interfaces.IProtocol.html" class="internal-link" title="twisted.internet.interfaces.IProtocol">protocol</a></code> each time a new connection is made.  It may call methods on the protocol to prepare it for use (e.g. authenticate) or validate it (check its health).</p>
<p>The <tt class="rst-docutils literal">prepareConnection</tt> callable may raise an exception or return a <code><a href="twisted.internet.defer.Deferred.html" class="internal-link" title="twisted.internet.defer.Deferred">Deferred</a></code> which fails to reject the connection.  A rejected connection is not used to fire an <code><a href="twisted.internet.defer.Deferred.html" class="internal-link" title="twisted.internet.defer.Deferred">Deferred</a></code> returned by <code><a href="#whenConnected" class="internal-link" title="twisted.application.internet.ClientService.whenConnected">whenConnected</a></code>.  Instead, <code><a href="twisted.application.internet.ClientService.html" class="internal-link" title="twisted.application.internet.ClientService">ClientService</a></code> handles the failure and continues as if the connection attempt were a failure (incrementing the counter passed to <tt class="rst-docutils literal">retryPolicy</tt>).</p>
<p><code><a href="twisted.internet.defer.Deferred.html" class="internal-link" title="twisted.internet.defer.Deferred">Deferred</a></code>s returned by <code><a href="#whenConnected" class="internal-link" title="twisted.application.internet.ClientService.whenConnected">whenConnected</a></code> will not fire until any <code><a href="twisted.internet.defer.Deferred.html" class="internal-link" title="twisted.internet.defer.Deferred">Deferred</a></code> returned by the <tt class="rst-docutils literal">prepareConnection</tt> callable fire. Otherwise its successful return value is consumed, but ignored.</p>
<p>Present Since Twisted 18.7.0</p>
</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.application.internet.ClientService.startService">
    
  </a>
  <a name="startService">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">startService</span>(self):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/application/internet.py#L1171">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">from <code><a href="twisted.application.service.IService.html#startService" class="internal-link" title="twisted.application.service.IService.startService">twisted.application.service.IService</a></code></div><div class="interfaceinfo">overrides <code><a href="twisted.application.service.Service.html#startService" class="internal-link">twisted.application.service.Service.startService</a></code></div>
    
    <div>Start this <code><a href="twisted.application.internet.ClientService.html" class="internal-link" title="twisted.application.internet.ClientService">ClientService</a></code>, initiating the connection retry loop.</div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.application.internet.ClientService.stopService">
    
  </a>
  <a name="stopService">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">stopService</span>(self):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/application/internet.py#L1181">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">from <code><a href="twisted.application.service.IService.html#stopService" class="internal-link" title="twisted.application.service.IService.stopService">twisted.application.service.IService</a></code></div><div class="interfaceinfo">overrides <code><a href="twisted.application.service.Service.html#stopService" class="internal-link">twisted.application.service.Service.stopService</a></code></div>
    
    <div>Stop attempting to reconnect and close any existing connections.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td colspan="2">a <code><a href="twisted.internet.defer.Deferred.html" class="internal-link" title="twisted.internet.defer.Deferred">Deferred</a></code> that fires when all outstanding connections are closed and all in-progress connection attempts halted.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.application.internet.ClientService.whenConnected">
    
  </a>
  <a name="whenConnected">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">whenConnected</span>(self, failAfterFailures=<a href="https://docs.python.org/3/library/constants.html#None" class="intersphinx-link">None</a>):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/application/internet.py#L1142">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div>Retrieve the currently-connected <code><a href="twisted.internet.protocol.Protocol.html" class="internal-link" title="twisted.internet.protocol.Protocol">Protocol</a></code>, or the next one to connect.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">fail​After​Failures:</span><code><a href="https://docs.python.org/3/library/functions.html#int" class="intersphinx-link">int</a></code> or None</td><td class="fieldArgDesc">number of connection failures after which the Deferred will deliver a Failure (None means the Deferred will only fail if/when the service is stopped).  Set this to 1 to make the very first connection failure signal an error.  Use 2 to allow one failure but signal an error if the subsequent retry then fails.</td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><p><code><a href="twisted.internet.defer.Deferred.html" class="internal-link" title="twisted.internet.defer.Deferred">Deferred</a></code> that may:</p>
<ul class="rst-simple">
<li>fire with <code><a href="twisted.internet.interfaces.IProtocol.html" class="internal-link" title="twisted.internet.interfaces.IProtocol">IProtocol</a></code></li>
<li>fail with <code><a href="twisted.internet.defer.CancelledError.html" class="internal-link" title="twisted.internet.defer.CancelledError">CancelledError</a></code> when the service is stopped</li>
<li>fail with e.g. <code><a href="twisted.internet.error.DNSLookupError.html" class="internal-link" title="twisted.internet.error.DNSLookupError">DNSLookupError</a></code> or <code><a href="twisted.internet.error.ConnectionRefusedError.html" class="internal-link" title="twisted.internet.error.ConnectionRefusedError">ConnectionRefusedError</a></code> when the number of consecutive failed connection attempts equals the value of "failAfterFailures"</li>
</ul>
</td><td class="fieldArgDesc">a Deferred that fires with a protocol produced by the factory passed to <tt class="rst-docutils literal">__init__</tt></td></tr></table></div>
  </div>
</div><div class="baseclassvariable private">
  
  
  <a name="twisted.application.internet.ClientService._log">
    
  </a>
  <a name="_log">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_log</span> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/application/internet.py#L1082">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="twisted.application.internet.ClientService._machine">
    
  </a>
  <a name="_machine">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_machine</span> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/application/internet.py#L1133">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div>

      </div>
    </div>

    <footer class="navbar navbar-default">
  

  <div class="container">
    <a href="index.html">API Documentation</a> for <a href="https://twistedmatrix.com/" class="projecthome">Twisted</a>,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    22.2.2.dev0 at 2022-03-04 05:57:20.
  </div>

  <!-- Google analytics, obviously. -->
  <script src="//www.google-analytics.com/urchin.js" type="text/javascript"></script>
  <script type="text/javascript">
    _uacct = "UA-99018-6";
    urchinTracker();
  </script>

  <!-- If the documentation isn't current, insert a current link. -->
  <script type="text/javascript">
    if (window.location.pathname.indexOf('/current/') == -1) {
      <!-- Give the user a link to this page, but in the current version of the docs. -->
      var link = document.getElementById('current-docs-link');
      link.href = window.location.pathname.replace(/\/\d+\.\d+\.\d+\/api\//, '/current/api/');
      <!-- And make it visible -->
      var container = document.getElementById('current-docs-container');
      container.style.display = "";
      delete link;
      delete container;
    }
  </script>
</footer>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>