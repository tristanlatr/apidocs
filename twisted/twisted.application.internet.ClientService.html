<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>twisted.application.internet.ClientService</title>
    <meta name="generator" content="pydoctor 21.2.2"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.75" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    

    <nav class="navbar navbar-default">
  
  <div class="container">

    <div class="navbar-header">
      
      <div class="navlinks">
        <span class="navbar-brand">
          <a href="http://twistedmatrix.com/" class="projecthome">Twisted</a> <a href="index.html">API Documentation</a>
        </span>

        <a href="moduleIndex.html">
          Modules
        </a>

        <a href="classIndex.html">
          Classes
        </a>

        <a href="nameIndex.html">
          Names
        </a>

        <form action="search-results.html" id="search-box-container">
          <div class="input-group">
            <input id="search-box" name="search-query" placeholder="Search..." aria-label="Search" minlength="2" class="form-control" />
            <span class="input-group-btn">
              <button class="btn btn-default" type="submit" title="Search"><img src="fonts/search.svg" alt="Search!" /></button>
              <a class="btn btn-default" id="search-help-button" title="Help" onclick="toggleSearchHelpText()"><img src="fonts/info.svg" alt="Help!" /></a>
            </span>
          </div>
        </form>

        <div class="rst-admonition hint" id="search-help-box">
          <p class="rst-last">
      
            Search bar offers the following options:
            <ul>   
                <li>
                  <strong>Term presence.</strong> The below example searches for documents that 
                    must contain “foo”, might contain “bar” and must not contain “baz”:
                  <br /> <code>'+foo bar -baz'</code>
                </li> 

                <li>
                  <strong>Wildcards.</strong> The below example searches for documents with words beginning with “foo”:
                  <br /> <code>'foo*'</code>
                </li> 

                <li>
                  <strong>Search in specific fields.</strong> The following search matches all documents 
                  that contains "foo" in their full dotted name and with “bar” in any field:
                  <br /> <code>'+fullName:*foo* +bar'</code>

                  <p>
                    Possible fields: 'name', 'docstring', 'fullName'.
                  </p>
                </li>

                <li>
                  <strong>Fuzzy matches.</strong> The following search matches all documents 
                  that have a word within 1 edit distance of “foo”:
                  <br /> <code>'foo~1'</code>
                </li>
            </ul>

          </p>
        </div>

      </div>


    </div>
  </div>

  <script>
 
    function toggleSearchHelpText() {
        document.body.classList.toggle("search-help-hidden");
    }
    // Init search and help text
    document.getElementById('search-box-container').style.display = 'block';
    document.getElementById('search-help-box').style.display = 'block';
    document.body.classList.add("search-help-hidden");

  </script>

</nav>

    

    <div class="container">

      <div class="page-header">
        <h1 class="class"><code><code><a href="twisted.html">twisted</a></code><wbr></wbr>.<code><a href="twisted.application.html">application</a></code><wbr></wbr>.<code><a href="twisted.application.internet.html">internet</a></code><wbr></wbr>.<code><a href="twisted.application.internet.ClientService.html">ClientService</a></code></code></h1>
        <div id="showPrivate">
          <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
        </div>
      </div>

      <div class="categoryHeader">
        class documentation
      </div>

      <div class="extrasDocstring">
        <p><code><span class="py-keyword">class</span> <span class="py-defname">ClientService</span>(<a href="twisted.application.service.Service.html" title="twisted.application.service.Service">service.Service</a>): <a href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/application/internet.py#L1073" class="sourceLink">(source)</a></code></p>
        <p><a href="classIndex.html#twisted.application.internet.ClientService">View In Hierarchy</a></p>
      </div>

      <div class="moduleDocstring">
        <div><p>A <code><a href="twisted.application.internet.ClientService.html">ClientService</a></code> maintains a single outgoing connection to a client endpoint, reconnecting after a configurable timeout when a connection fails, either before or after connecting.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Present Since</td></tr><tr><td colspan="2">16.1.0</td></tr></table></div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id91">
  
  
  <tr class="method">
    
    <td>Method</td>
    <td><code><a href="#__init__">__init__</a></code></td>
    <td><span></span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#startService">startService</a></code></td>
    <td><span>Start this <code><a href="twisted.application.internet.ClientService.html">ClientService</a></code>, initiating the connection retry loop.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#stopService">stopService</a></code></td>
    <td><span>Stop attempting to reconnect and close any existing connections.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#whenConnected">whenConnected</a></code></td>
    <td><span>Retrieve the currently-connected <code><a href="twisted.internet.protocol.Protocol.html">Protocol</a></code>, or the next one to connect.</span></td>
  </tr><tr class="classvariable private">
    
    <td>Class Variable</td>
    <td><code><a href="#_log">_log</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_machine">_machine</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
        
          <p class="inheritedFrom">
            Inherited from <code><a href="twisted.application.service.Service.html">Service</a></code>:
          </p>
          <table class="children sortable" id="id92">
  
  
  <tr class="basemethod">
    
    <td>Method</td>
    <td><code><a href="twisted.application.service.Service.html#__getstate__">__getstate__</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><code><a href="twisted.application.service.Service.html#disownServiceParent">disownServiceParent</a></code></td>
    <td><span>Use this API to remove an <code><a href="twisted.application.service.IService.html">IService</a></code> from an <code><a href="twisted.application.service.IServiceCollection.html">IServiceCollection</a></code>.</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><code><a href="twisted.application.service.Service.html#privilegedStartService">privilegedStartService</a></code></td>
    <td><span>Do preparation work for starting the service.</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><code><a href="twisted.application.service.Service.html#setName">setName</a></code></td>
    <td><span>Set the name of the service.</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><code><a href="twisted.application.service.Service.html#setServiceParent">setServiceParent</a></code></td>
    <td><span>Set the parent of the service.  This method is responsible for setting the <code>parent</code> attribute on this service (the child service).</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="twisted.application.service.Service.html#name">name</a></code></td>
    <td><span>A <code>str</code> which is the name of the service or <code>None</code>.</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="twisted.application.service.Service.html#parent">parent</a></code></td>
    <td><span>An <code>IServiceCollection</code> which is the parent or <code>None</code>.</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="twisted.application.service.Service.html#running">running</a></code></td>
    <td><span>A <code>boolean</code> which indicates whether the service is running.</span></td>
  </tr>
</table>
          

          
      </div>

      <div id="childList">

        <div class="basemethod">
  
  
  <a name="twisted.application.internet.ClientService.__init__">
    
  </a>
  <a name="__init__">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">__init__</span>(self, endpoint, factory, retryPolicy=None, clock=None, prepareConnection=None):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/application/internet.py#L1084">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">endpoint</span></td><td class="fieldArgDesc">A <code><a href="twisted.internet.interfaces.IStreamClientEndpoint.html">stream client endpoint</a></code> provider which will be used to connect when the service starts.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">factory</span></td><td class="fieldArgDesc">A <code><a href="twisted.internet.interfaces.IProtocolFactory.html">protocol factory</a></code> which will be used to create clients for the endpoint.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">retryPolicy:</span>callable taking (the number of failed connection attempts made in a row (<code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code>)) and returning the number of seconds to wait before making another attempt.</td><td class="fieldArgDesc">A policy configuring how long <code><a href="twisted.application.internet.ClientService.html">ClientService</a></code> will wait between attempts to connect to <code>endpoint</code>.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">clock:</span><code><a href="twisted.internet.interfaces.IReactorTime.html">IReactorTime</a></code></td><td class="fieldArgDesc">The clock used to schedule reconnection.  It's mainly useful to be parametrized in tests.  If the factory is serialized, this attribute will not be serialized, and the default value (the reactor) will be restored when deserialized.</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">prepareConnection:</span><code><a href="https://docs.python.org/3/library/functions.html#callable">callable</a></code></td><td class="fieldArgDesc">A single argument <code><a href="https://docs.python.org/3/library/functions.html#callable">callable</a></code> that may return a <code><a href="twisted.internet.defer.Deferred.html">Deferred</a></code>. It will be called once with the <code><a href="twisted.internet.interfaces.IProtocol.html">protocol</a></code> each time a new connection is made.  It may call methods on the protocol to prepare it for use (e.g. authenticate) or validate it (check its health).<p>The <code>prepareConnection</code> callable may raise an exception or return a <code><a href="twisted.internet.defer.Deferred.html">Deferred</a></code> which fails to reject the connection.  A rejected connection is not used to fire an <code><a href="twisted.internet.defer.Deferred.html">Deferred</a></code> returned by <code><a href="#whenConnected">whenConnected</a></code>.  Instead, <code><a href="twisted.application.internet.ClientService.html">ClientService</a></code> handles the failure and continues as if the connection attempt were a failure (incrementing the counter passed to <code>retryPolicy</code>).</p><p><code><a href="twisted.internet.defer.Deferred.html">Deferred</a></code>s returned by <code><a href="#whenConnected">whenConnected</a></code> will not fire until any <code><a href="twisted.internet.defer.Deferred.html">Deferred</a></code> returned by the <code>prepareConnection</code> callable fire. Otherwise its successful return value is consumed, but ignored.</p><p>Present Since Twisted 18.7.0</p></td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.application.internet.ClientService.startService">
    
  </a>
  <a name="startService">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">startService</span>(self):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/application/internet.py#L1171">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">from <code><a href="twisted.application.service.IService.html#startService">twisted.application.service.IService</a></code></div><div class="interfaceinfo">overrides <code><a href="twisted.application.service.Service.html#startService">twisted.application.service.Service.startService</a></code></div>
    
    <div><p>Start this <code><a href="twisted.application.internet.ClientService.html">ClientService</a></code>, initiating the connection retry loop.</p></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.application.internet.ClientService.stopService">
    
  </a>
  <a name="stopService">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">stopService</span>(self):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/application/internet.py#L1181">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">from <code><a href="twisted.application.service.IService.html#stopService">twisted.application.service.IService</a></code></div><div class="interfaceinfo">overrides <code><a href="twisted.application.service.Service.html#stopService">twisted.application.service.Service.stopService</a></code></div>
    
    <div><p>Stop attempting to reconnect and close any existing connections.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td colspan="2">a <code><a href="twisted.internet.defer.Deferred.html">Deferred</a></code> that fires when all outstanding connections are closed and all in-progress connection attempts halted.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.application.internet.ClientService.whenConnected">
    
  </a>
  <a name="whenConnected">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">whenConnected</span>(self, failAfterFailures=None):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/application/internet.py#L1142">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Retrieve the currently-connected <code><a href="twisted.internet.protocol.Protocol.html">Protocol</a></code>, or the next one to connect.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">failAfterFailures:</span><code><a href="https://docs.python.org/3/library/functions.html#int">int</a></code> or None</td><td class="fieldArgDesc">number of connection failures after which the Deferred will deliver a Failure (None means the Deferred will only fail if/when the service is stopped).  Set this to 1 to make the very first connection failure signal an error.  Use 2 to allow one failure but signal an error if the subsequent retry then fails.</td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code><a href="twisted.internet.defer.Deferred.html">Deferred</a></code> that may:<ul><li>fire with <code><a href="twisted.internet.interfaces.IProtocol.html">IProtocol</a></code></li><li>fail with <code><a href="twisted.internet.defer.CancelledError.html">CancelledError</a></code> when the service is stopped</li><li>fail with e.g. <code><a href="twisted.internet.error.DNSLookupError.html">DNSLookupError</a></code> or <code><a href="twisted.internet.error.ConnectionRefusedError.html">ConnectionRefusedError</a></code> when the number of consecutive failed connection attempts equals the value of "failAfterFailures"</li></ul></td><td class="fieldArgDesc">a Deferred that fires with a protocol produced by the factory passed to <code>__init__</code></td></tr></table></div>
  </div>
</div><div class="baseclassvariable private">
  
  
  <a name="twisted.application.internet.ClientService._log">
    
  </a>
  <a name="_log">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_log</span> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/application/internet.py#L1082">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="twisted.application.internet.ClientService._machine">
    
  </a>
  <a name="_machine">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_machine</span> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/application/internet.py#L1133">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div>

      </div>
    </div>

    <footer class="navbar navbar-default">
  
  <div class="container">
    <a href="index.html">API Documentation</a> for <a href="http://twistedmatrix.com/" class="projecthome">Twisted</a>,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    21.2.2 at 2021-06-29 01:24:32.
  </div>
</footer>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>