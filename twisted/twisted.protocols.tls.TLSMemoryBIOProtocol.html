<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>twisted.protocols.tls.TLSMemoryBIOProtocol</title>
    <meta name="generator" content="pydoctor 21.2.2"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.75" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    

    <nav class="navbar navbar-default">
  
  <div class="container">

    <div class="navbar-header">
      
      <div class="navlinks">
        <span class="navbar-brand">
          <a href="https://twistedmatrix.com/" class="projecthome">Twisted</a> <a href="index.html">API Documentation</a>
        </span>

        <a href="moduleIndex.html">
          Modules
        </a>

        <a href="classIndex.html">
          Classes
        </a>

        <a href="nameIndex.html">
          Names
        </a>

        <form action="search-results.html" id="search-box-container">
          <div class="input-group">
            <input id="search-box" name="search-query" placeholder="Search..." aria-label="Search" minlength="2" class="form-control" />
            <span class="input-group-btn">
              <button class="btn btn-default" type="submit" title="Search"><img src="fonts/search.svg" alt="Search!" /></button>
              <a class="btn btn-default" id="search-help-button" title="Help" onclick="toggleSearchHelpText()"><img src="fonts/info.svg" alt="Help!" /></a>
            </span>
          </div>
        </form>

        <div class="rst-admonition hint" id="search-help-box">
          <p class="rst-last">
      
            Search bar offers the following options:
            <ul>   
                <li>
                  <strong>Term presence.</strong> The below example searches for documents that 
                    must contain “foo”, might contain “bar” and must not contain “baz”:
                  <br /> <code>'+foo bar -baz'</code>
                </li> 

                <li>
                  <strong>Wildcards.</strong> The below example searches for documents with words beginning with “foo”:
                  <br /> <code>'foo*'</code>
                </li> 

                <li>
                  <strong>Search in specific fields.</strong> The following search matches all documents 
                  that contains "foo" in their full dotted name and with “bar” in any field:
                  <br /> <code>'+fullName:*foo* +bar'</code>

                  <p>
                    Possible fields: 'name', 'docstring', 'fullName'.
                  </p>
                </li>

                <li>
                  <strong>Fuzzy matches.</strong> The following search matches all documents 
                  that have a word within 1 edit distance of “foo”:
                  <br /> <code>'foo~1'</code>
                </li>
            </ul>

          </p>
        </div>

      </div>


    </div>
  </div>

  <script>
 
    function toggleSearchHelpText() {
        document.body.classList.toggle("search-help-hidden");
    }
    // Init search and help text
    document.getElementById('search-box-container').style.display = 'block';
    document.getElementById('search-help-box').style.display = 'block';
    document.body.classList.add("search-help-hidden");

  </script>

</nav>

    

    <div class="container">

      <div class="page-header">
        <h1 class="class"><code><code><a href="twisted.html">twisted</a></code><wbr></wbr>.<code><a href="twisted.protocols.html">protocols</a></code><wbr></wbr>.<code><a href="twisted.protocols.tls.html">tls</a></code><wbr></wbr>.<code><a href="twisted.protocols.tls.TLSMemoryBIOProtocol.html">TLSMemoryBIOProtocol</a></code></code></h1>
        <div id="showPrivate">
          <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
        </div>
      </div>

      <div class="categoryHeader">
        class documentation
      </div>

      <div class="extrasDocstring">
        <p><code><span class="py-keyword">class</span> <span class="py-defname">TLSMemoryBIOProtocol</span>(<a href="twisted.protocols.policies.ProtocolWrapper.html" title="twisted.protocols.policies.ProtocolWrapper">ProtocolWrapper</a>): <a href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L114" class="sourceLink">(source)</a></code></p><p>Implements interfaces: <code><a href="twisted.internet.interfaces.INegotiated.html">twisted.internet.interfaces.INegotiated</a></code>, <code><a href="twisted.internet.interfaces.ISystemHandle.html">twisted.internet.interfaces.ISystemHandle</a></code></p>
        <p><a href="classIndex.html#twisted.protocols.tls.TLSMemoryBIOProtocol">View In Hierarchy</a></p>
      </div>

      <div class="moduleDocstring">
        <div><p><code><a href="twisted.protocols.tls.TLSMemoryBIOProtocol.html">TLSMemoryBIOProtocol</a></code> is a protocol wrapper which uses OpenSSL via a memory BIO to encrypt bytes written to it before sending them on to the underlying transport and decrypts bytes received from the underlying transport before delivering them to the wrapped protocol.</p><p>In addition to producer events from the underlying transport, the need to wait for reads before a write can proceed means the <code><a href="twisted.protocols.tls.TLSMemoryBIOProtocol.html">TLSMemoryBIOProtocol</a></code> may also want to pause a producer.  Pause/resume events are therefore merged using the <code><a href="twisted.protocols.tls._ProducerMembrane.html">_ProducerMembrane</a></code> wrapper.  Non-streaming (pull) producers are supported by wrapping them with <code><a href="twisted.internet._producer_helpers._PullToPush.html">_PullToPush</a></code>.</p></div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id2475">
  
  
  <tr class="method">
    
    <td>Method</td>
    <td><code><a href="#__init__">__init__</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#abortConnection">abortConnection</a></code></td>
    <td><span>Tear down TLS state so that if the connection is aborted mid-handshake we don't deliver any further data from the application.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#connectionLost">connectionLost</a></code></td>
    <td><span>Handle the possible repetition of calls to this method (due to either the underlying transport going away or due to an error at the TLS layer) and make sure the base implementation only gets invoked once.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#dataReceived">dataReceived</a></code></td>
    <td><span>Deliver any received bytes to the receive BIO and then read and deliver to the application any application-level data which becomes available as a result of this.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#failVerification">failVerification</a></code></td>
    <td><span>Abort the connection during connection setup, giving a reason that certificate verification failed.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#getHandle">getHandle</a></code></td>
    <td><span>Return the <code><a href="https://pyopenssl.readthedocs.io/en/stable/api/ssl.html#OpenSSL.SSL.Connection">OpenSSL.SSL.Connection</a></code> object being used to encrypt and decrypt this connection.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#getPeerCertificate">getPeerCertificate</a></code></td>
    <td><span>Return an object with the peer's certificate info.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#loseConnection">loseConnection</a></code></td>
    <td><span>Send a TLS close alert and close the underlying connection.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#makeConnection">makeConnection</a></code></td>
    <td><span>Connect this wrapper to the given transport and initialize the necessary <code><a href="https://pyopenssl.readthedocs.io/en/stable/api/ssl.html#OpenSSL.SSL.Connection">OpenSSL.SSL.Connection</a></code> with a memory BIO.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#registerProducer">registerProducer</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#unregisterProducer">unregisterProducer</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#write">write</a></code></td>
    <td><span>Process the given application bytes and send any resulting TLS traffic which arrives in the send BIO.</span></td>
  </tr><tr class="method">
    
    <td>Method</td>
    <td><code><a href="#writeSequence">writeSequence</a></code></td>
    <td><span>Write a sequence of application bytes by joining them into one string and passing them to <code><a href="#write">write</a></code>.</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="#connected">connected</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="#disconnecting">disconnecting</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="property">
    
    <td>Property</td>
    <td><code><a href="#negotiatedProtocol">negotiatedProtocol</a></code></td>
    <td><span></span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_bufferedWrite">_bufferedWrite</a></code></td>
    <td><span>Put the given octets into <code><a href="#_appSendBuffer">TLSMemoryBIOProtocol._appSendBuffer</a></code>, and tell any listening producer that it should pause because we are now buffering.</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_checkHandshakeStatus">_checkHandshakeStatus</a></code></td>
    <td><span>Ask OpenSSL to proceed with a handshake in progress.</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_flushReceiveBIO">_flushReceiveBIO</a></code></td>
    <td><span class="undocumented">No summary</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_flushSendBIO">_flushSendBIO</a></code></td>
    <td><span>Read any bytes out of the send BIO and write them to the underlying transport.</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_shutdownTLS">_shutdownTLS</a></code></td>
    <td><span>Initiate, or reply to, the shutdown handshake of the TLS layer.</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_tlsShutdownFinished">_tlsShutdownFinished</a></code></td>
    <td><span>Called when TLS connection has gone away; tell underlying transport to disconnect.</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_unbufferPendingWrites">_unbufferPendingWrites</a></code></td>
    <td><span>Un-buffer all waiting writes in <code><a href="#_appSendBuffer">TLSMemoryBIOProtocol._appSendBuffer</a></code>.</span></td>
  </tr><tr class="method private">
    
    <td>Method</td>
    <td><code><a href="#_write">_write</a></code></td>
    <td><span>Process the given application bytes and send any resulting TLS traffic which arrives in the send BIO.</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_aborted">_aborted</a></code></td>
    <td><span><code>abortConnection</code> has been called.  No further data will be received to the wrapped protocol's <code>dataReceived</code>.</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_appSendBuffer">_appSendBuffer</a></code></td>
    <td><span>application-level (cleartext) data that is waiting to be transferred to the TLS buffer, but can't be because the TLS connection is handshaking.</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_connectWrapped">_connectWrapped</a></code></td>
    <td><span>A flag indicating whether or not to call <code>makeConnection</code> on the wrapped protocol.  This is for the reactor's <code><a href="twisted.internet.interfaces.ITLSTransport.html#startTLS">twisted.internet.interfaces.ITLSTransport.startTLS</a></code> implementation, since it has a protocol which it has already called <code>makeConnection</code> on, and which has no interest in a new transport.  See #3821.</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_handshakeDone">_handshakeDone</a></code></td>
    <td><span>A flag indicating whether or not the handshake is known to have completed successfully (<code>True</code>) or not (<code>False</code>).  This is used to control error reporting behavior.  If the handshake has not completed, the underlying <code><a href="https://pyopenssl.readthedocs.io/en/stable/api/ssl.html#OpenSSL.SSL.Error">OpenSSL.SSL.Error</a></code> will be passed to the application's <code>connectionLost</code> method.  If it has completed, any unexpected <code><a href="https://pyopenssl.readthedocs.io/en/stable/api/ssl.html#OpenSSL.SSL.Error">OpenSSL.SSL.Error</a></code> will be turned into a <code><a href="twisted.protocols.ftp.ConnectionLost.html">ConnectionLost</a></code>.  This is weird; however, it is simply an attempt at a faithful re-implementation of the behavior provided by <code><a href="twisted.internet.ssl.html">twisted.internet.ssl</a></code>.</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_lostTLSConnection">_lostTLSConnection</a></code></td>
    <td><span>A flag indicating whether connection loss has already been dealt with (<code>True</code>) or not (<code>False</code>).  TLS disconnection is distinct from the underlying connection being lost.</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_producer">_producer</a></code></td>
    <td><span>The current producer registered via <code>registerProducer</code>, or <code><a href="https://docs.python.org/3/library/constants.html#None">None</a></code> if no producer has been registered or a previous one was unregistered.</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_producerPaused">_producerPaused</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_reason">_reason</a></code></td>
    <td><span>If an unexpected <code><a href="https://pyopenssl.readthedocs.io/en/stable/api/ssl.html#OpenSSL.SSL.Error">OpenSSL.SSL.Error</a></code> occurs which causes the connection to be lost, it is saved here.  If appropriate, this may be used as the reason passed to the application protocol's <code>connectionLost</code> method.</span></td>
  </tr><tr class="instancevariable private">
    
    <td>Instance Variable</td>
    <td><code><a href="#_tlsConnection">_tlsConnection</a></code></td>
    <td><span>The <code><a href="https://pyopenssl.readthedocs.io/en/stable/api/ssl.html#OpenSSL.SSL.Connection">OpenSSL.SSL.Connection</a></code> instance which is encrypted and decrypting this connection.</span></td>
  </tr>
</table>
        
          <p class="inheritedFrom">
            Inherited from <code><a href="twisted.protocols.policies.ProtocolWrapper.html">ProtocolWrapper</a></code>:
          </p>
          <table class="children sortable" id="id2476">
  
  
  <tr class="basemethod">
    
    <td>Method</td>
    <td><code><a href="twisted.protocols.policies.ProtocolWrapper.html#__getattr__">__getattr__</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><code><a href="twisted.protocols.policies.ProtocolWrapper.html#getHost">getHost</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><code><a href="twisted.protocols.policies.ProtocolWrapper.html#getPeer">getPeer</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><code><a href="twisted.protocols.policies.ProtocolWrapper.html#logPrefix">logPrefix</a></code></td>
    <td><span>Use a customized log prefix mentioning both the wrapped protocol and the current one.</span></td>
  </tr><tr class="basemethod">
    
    <td>Method</td>
    <td><code><a href="twisted.protocols.policies.ProtocolWrapper.html#stopConsuming">stopConsuming</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="twisted.protocols.policies.ProtocolWrapper.html#factory">factory</a></code></td>
    <td><span>The <code><a href="twisted.protocols.policies.WrappingFactory.html">WrappingFactory</a></code> which created this <code><a href="twisted.protocols.policies.ProtocolWrapper.html">ProtocolWrapper</a></code>.</span></td>
  </tr><tr class="baseinstancevariable">
    
    <td>Instance Variable</td>
    <td><code><a href="twisted.protocols.policies.ProtocolWrapper.html#wrappedProtocol">wrappedProtocol</a></code></td>
    <td><span>An <code><a href="twisted.internet.interfaces.IProtocol.html">IProtocol</a></code> provider to which <code><a href="twisted.internet.interfaces.IProtocol.html">IProtocol</a></code> method calls onto this <code><a href="twisted.protocols.policies.ProtocolWrapper.html">ProtocolWrapper</a></code> will be proxied.</span></td>
  </tr>
</table>
          

          
      </div>

      <div id="childList">

        <div class="basemethod">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol.__init__">
    
  </a>
  <a name="__init__">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">__init__</span>(self, factory, wrappedProtocol, _connectWrapped=True):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L176">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overrides <code><a href="twisted.protocols.policies.ProtocolWrapper.html#__init__">twisted.protocols.policies.ProtocolWrapper.__init__</a></code></div>
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol.abortConnection">
    
  </a>
  <a name="abortConnection">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">abortConnection</span>(self):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L417">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">from <code><a href="twisted.internet.interfaces.ITCPTransport.html#abortConnection">twisted.internet.interfaces.ITCPTransport</a></code></div>
    
    <div><p>Tear down TLS state so that if the connection is aborted mid-handshake we don't deliver any further data from the application.</p></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol.connectionLost">
    
  </a>
  <a name="connectionLost">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">connectionLost</span>(self, reason):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L379">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overrides <code><a href="twisted.protocols.policies.ProtocolWrapper.html#connectionLost">twisted.protocols.policies.ProtocolWrapper.connectionLost</a></code></div>
    
    <div><p>Handle the possible repetition of calls to this method (due to either the underlying transport going away or due to an error at the TLS layer) and make sure the base implementation only gets invoked once.</p></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol.dataReceived">
    
  </a>
  <a name="dataReceived">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">dataReceived</span>(self, bytes):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L297">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overrides <code><a href="twisted.protocols.policies.ProtocolWrapper.html#dataReceived">twisted.protocols.policies.ProtocolWrapper.dataReceived</a></code></div>
    
    <div><p>Deliver any received bytes to the receive BIO and then read and deliver to the application any application-level data which becomes available as a result of this.</p></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol.failVerification">
    
  </a>
  <a name="failVerification">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">failVerification</span>(self, reason):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L427">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Abort the connection during connection setup, giving a reason that certificate verification failed.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">reason:</span><code><a href="twisted.python.failure.Failure.html">Failure</a></code></td><td class="fieldArgDesc">The reason that the verification failed; reported to the application protocol's <code>connectionLost</code> method.</td></tr></table></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol.getHandle">
    
  </a>
  <a name="getHandle">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">getHandle</span>(self):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L180">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">from <code><a href="twisted.internet.interfaces.ISystemHandle.html#getHandle">twisted.internet.interfaces.ISystemHandle</a></code></div>
    
    <div><p>Return the <code><a href="https://pyopenssl.readthedocs.io/en/stable/api/ssl.html#OpenSSL.SSL.Connection">OpenSSL.SSL.Connection</a></code> object being used to encrypt and decrypt this connection.</p><p>This is done for the benefit of <code><a href="twisted.internet.ssl.Certificate.html">twisted.internet.ssl.Certificate</a></code>'s <code>peerFromTransport</code> and <code>hostFromTransport</code> methods only.  A different system handle may be returned by future versions of this method.</p></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol.getPeerCertificate">
    
  </a>
  <a name="getPeerCertificate">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">getPeerCertificate</span>(self):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L540">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">from <code><a href="twisted.internet.interfaces.ISSLTransport.html#getPeerCertificate">twisted.internet.interfaces.ISSLTransport</a></code></div>
    
    <div><p>Return an object with the peer's certificate info.</p></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol.loseConnection">
    
  </a>
  <a name="loseConnection">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">loseConnection</span>(self):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L399">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">from <code><a href="twisted.internet.interfaces.ITransport.html#loseConnection">twisted.internet.interfaces.ITransport</a></code></div><div class="interfaceinfo">overrides <code><a href="twisted.protocols.policies.ProtocolWrapper.html#loseConnection">twisted.protocols.policies.ProtocolWrapper.loseConnection</a></code></div>
    
    <div><p>Send a TLS close alert and close the underlying connection.</p></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol.makeConnection">
    
  </a>
  <a name="makeConnection">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">makeConnection</span>(self, transport):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L192">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overrides <code><a href="twisted.protocols.policies.ProtocolWrapper.html#makeConnection">twisted.protocols.policies.ProtocolWrapper.makeConnection</a></code></div>
    
    <div><p>Connect this wrapper to the given transport and initialize the necessary <code><a href="https://pyopenssl.readthedocs.io/en/stable/api/ssl.html#OpenSSL.SSL.Connection">OpenSSL.SSL.Connection</a></code> with a memory BIO.</p></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol.registerProducer">
    
  </a>
  <a name="registerProducer">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">registerProducer</span>(self, producer, streaming):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L570">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overrides <code><a href="twisted.protocols.policies.ProtocolWrapper.html#registerProducer">twisted.protocols.policies.ProtocolWrapper.registerProducer</a></code></div>
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol.unregisterProducer">
    
  </a>
  <a name="unregisterProducer">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">unregisterProducer</span>(self):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L589">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">overrides <code><a href="twisted.protocols.policies.ProtocolWrapper.html#unregisterProducer">twisted.protocols.policies.ProtocolWrapper.unregisterProducer</a></code></div>
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol.write">
    
  </a>
  <a name="write">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">write</span>(self, bytes):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L439">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">from <code><a href="twisted.internet.interfaces.ITransport.html#write">twisted.internet.interfaces.ITransport</a></code></div><div class="interfaceinfo">overrides <code><a href="twisted.protocols.policies.ProtocolWrapper.html#write">twisted.protocols.policies.ProtocolWrapper.write</a></code></div>
    
    <div><p>Process the given application bytes and send any resulting TLS traffic which arrives in the send BIO.</p><p>If <code>loseConnection</code> was called, subsequent calls to <code>write</code> will drop the bytes on the floor.</p></div>
  </div>
</div><div class="basemethod">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol.writeSequence">
    
  </a>
  <a name="writeSequence">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">writeSequence</span>(self, iovec):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L533">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    <div class="interfaceinfo">from <code><a href="twisted.internet.interfaces.ITransport.html#writeSequence">twisted.internet.interfaces.ITransport</a></code></div><div class="interfaceinfo">overrides <code><a href="twisted.protocols.policies.ProtocolWrapper.html#writeSequence">twisted.protocols.policies.ProtocolWrapper.writeSequence</a></code></div>
    
    <div><p>Write a sequence of application bytes by joining them into one string and passing them to <code><a href="#write">write</a></code>.</p></div>
  </div>
</div><div class="baseinstancevariable">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol.connected">
    
  </a>
  <a name="connected">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">connected</span>: <code><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></code> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L393">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="baseinstancevariable">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol.disconnecting">
    
  </a>
  <a name="disconnecting">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">disconnecting</span>: <code><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></code> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L413">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    <div class="interfaceinfo">overrides <code><a href="twisted.protocols.policies.ProtocolWrapper.html#disconnecting">twisted.protocols.policies.ProtocolWrapper.disconnecting</a></code></div>
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="baseproperty">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol.negotiatedProtocol">
    
  </a>
  <a name="negotiatedProtocol">
    
  </a>
  <div class="functionHeader">
    @property<br />
    <span class="py-defname">negotiatedProtocol</span> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L543">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    <div class="interfaceinfo">from <code><a href="twisted.internet.interfaces.INegotiated.html#negotiatedProtocol">twisted.internet.interfaces.INegotiated</a></code></div>
    
    <div><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">See Also</td></tr><tr><td colspan="2"><code><a href="twisted.internet.interfaces.INegotiated.html#negotiatedProtocol">INegotiated.negotiatedProtocol</a></code></td></tr></table></div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol._bufferedWrite">
    
  </a>
  <a name="_bufferedWrite">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_bufferedWrite</span>(self, octets):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L456">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Put the given octets into <code><a href="#_appSendBuffer">TLSMemoryBIOProtocol._appSendBuffer</a></code>, and tell any listening producer that it should pause because we are now buffering.</p></div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol._checkHandshakeStatus">
    
  </a>
  <a name="_checkHandshakeStatus">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_checkHandshakeStatus</span>(self):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L218">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Ask OpenSSL to proceed with a handshake in progress.</p><p>Initially, this just sends the ClientHello; after some bytes have been stuffed in to the <code>Connection</code> object by <code>dataReceived</code>, it will then respond to any <code>Certificate</code> or <code>KeyExchange</code> messages.</p></div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol._flushReceiveBIO">
    
  </a>
  <a name="_flushReceiveBIO">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_flushReceiveBIO</span>(self):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L255">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Try to receive any application-level bytes which are now available because of a previous write into the receive BIO.  This will take care of delivering any application-level bytes which are received to the protocol, as well as handling of the various exceptions which can come from trying to get such bytes.</p></div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol._flushSendBIO">
    
  </a>
  <a name="_flushSendBIO">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_flushSendBIO</span>(self):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L242">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Read any bytes out of the send BIO and write them to the underlying transport.</p></div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol._shutdownTLS">
    
  </a>
  <a name="_shutdownTLS">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_shutdownTLS</span>(self):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L326">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Initiate, or reply to, the shutdown handshake of the TLS layer.</p></div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol._tlsShutdownFinished">
    
  </a>
  <a name="_tlsShutdownFinished">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_tlsShutdownFinished</span>(self, reason):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L346">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Called when TLS connection has gone away; tell underlying transport to disconnect.</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">reason:</span><code><a href="twisted.python.failure.Failure.html">Failure</a></code> or <code><a href="https://docs.python.org/3/library/constants.html#None">None</a></code></td><td class="fieldArgDesc">a <code><a href="twisted.python.failure.Failure.html">Failure</a></code> whose value is an <code><a href="https://docs.python.org/3/library/exceptions.html#Exception">Exception</a></code> if we want to report that failure through to the wrapped protocol's <code>connectionLost</code>, or <code><a href="https://docs.python.org/3/library/constants.html#None">None</a></code> if the <code>reason</code> that <code>connectionLost</code> should receive should be coming from the underlying transport.</td></tr></table></div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol._unbufferPendingWrites">
    
  </a>
  <a name="_unbufferPendingWrites">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_unbufferPendingWrites</span>(self):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L466">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Un-buffer all waiting writes in <code><a href="#_appSendBuffer">TLSMemoryBIOProtocol._appSendBuffer</a></code>.</p></div>
  </div>
</div><div class="basemethod private">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol._write">
    
  </a>
  <a name="_write">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_write</span>(self, bytes):
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L492">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Process the given application bytes and send any resulting TLS traffic which arrives in the send BIO.</p><p>This may be called by <code>dataReceived</code> with bytes that were buffered before <code>loseConnection</code> was called, which is why this function doesn't check for disconnection but accepts the bytes regardless.</p></div>
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol._aborted">
    
  </a>
  <a name="_aborted">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_aborted</span>: <code><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></code> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L165">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><code>abortConnection</code> has been called.  No further data will be received to the wrapped protocol's <code>dataReceived</code>.</div>
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol._appSendBuffer">
    
  </a>
  <a name="_appSendBuffer">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_appSendBuffer</span>: <code><a href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code> of <code><a href="https://docs.python.org/3/library/stdtypes.html#bytes">bytes</a></code> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L135">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div>application-level (cleartext) data that is waiting to be transferred to the TLS buffer, but can't be because the TLS connection is handshaking.</div>
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol._connectWrapped">
    
  </a>
  <a name="_connectWrapped">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_connectWrapped</span> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L140">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div>A flag indicating whether or not to call <code>makeConnection</code> on the wrapped protocol.  This is for the reactor's <code><a href="twisted.internet.interfaces.ITLSTransport.html#startTLS">twisted.internet.interfaces.ITLSTransport.startTLS</a></code> implementation, since it has a protocol which it has already called <code>makeConnection</code> on, and which has no interest in a new transport.  See #3821.</div>
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol._handshakeDone">
    
  </a>
  <a name="_handshakeDone">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_handshakeDone</span>: <code><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></code> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L146">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div>A flag indicating whether or not the handshake is known to have completed successfully (<code>True</code>) or not (<code>False</code>).  This is used to control error reporting behavior.  If the handshake has not completed, the underlying <code><a href="https://pyopenssl.readthedocs.io/en/stable/api/ssl.html#OpenSSL.SSL.Error">OpenSSL.SSL.Error</a></code> will be passed to the application's <code>connectionLost</code> method.  If it has completed, any unexpected <code><a href="https://pyopenssl.readthedocs.io/en/stable/api/ssl.html#OpenSSL.SSL.Error">OpenSSL.SSL.Error</a></code> will be turned into a <code><a href="twisted.protocols.ftp.ConnectionLost.html">ConnectionLost</a></code>.  This is weird; however, it is simply an attempt at a faithful re-implementation of the behavior provided by <code><a href="twisted.internet.ssl.html">twisted.internet.ssl</a></code>.</div>
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol._lostTLSConnection">
    
  </a>
  <a name="_lostTLSConnection">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_lostTLSConnection</span>: <code><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></code> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L131">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div>A flag indicating whether connection loss has already been dealt with (<code>True</code>) or not (<code>False</code>).  TLS disconnection is distinct from the underlying connection being lost.</div>
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol._producer">
    
  </a>
  <a name="_producer">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_producer</span> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L161">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div>The current producer registered via <code>registerProducer</code>, or <code><a href="https://docs.python.org/3/library/constants.html#None">None</a></code> if no producer has been registered or a previous one was unregistered.</div>
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol._producerPaused">
    
  </a>
  <a name="_producerPaused">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_producerPaused</span>: <code><a href="https://docs.python.org/3/library/functions.html#bool">bool</a></code> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L599">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol._reason">
    
  </a>
  <a name="_reason">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_reason</span> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L156">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div>If an unexpected <code><a href="https://pyopenssl.readthedocs.io/en/stable/api/ssl.html#OpenSSL.SSL.Error">OpenSSL.SSL.Error</a></code> occurs which causes the connection to be lost, it is saved here.  If appropriate, this may be used as the reason passed to the application protocol's <code>connectionLost</code> method.</div>
  </div>
</div><div class="baseinstancevariable private">
  
  
  <a name="twisted.protocols.tls.TLSMemoryBIOProtocol._tlsConnection">
    
  </a>
  <a name="_tlsConnection">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">_tlsConnection</span> =
    <a class="sourceLink" href="https://github.com/twisted/twisted/tree/twisted-21.2.0/src/twisted/protocols/tls.py#L128">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div>The <code><a href="https://pyopenssl.readthedocs.io/en/stable/api/ssl.html#OpenSSL.SSL.Connection">OpenSSL.SSL.Connection</a></code> instance which is encrypted and decrypting this connection.</div>
  </div>
</div>

      </div>
    </div>

    <footer class="navbar navbar-default">
  
  <div class="container">
    <a href="index.html">API Documentation</a> for <a href="https://twistedmatrix.com/" class="projecthome">Twisted</a>,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    21.2.2 at 2022-01-06 17:13:30.
  </div>
</footer>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>