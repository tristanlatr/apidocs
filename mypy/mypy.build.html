<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>mypy.build</title>
    <meta name="generator" content="pydoctor 21.2.2"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.75" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    

    <nav class="navbar navbar-default">
  
  <div class="container">

    <div class="navbar-header">
      
      <div class="navlinks">
        <span class="navbar-brand">
          <a href="https://github.com/python/mypy" class="projecthome">mypy-0.930</a> <a href="index.html">API Documentation</a>
        </span>

        <a href="moduleIndex.html">
          Modules
        </a>

        <a href="classIndex.html">
          Classes
        </a>

        <a href="nameIndex.html">
          Names
        </a>

        <form action="search-results.html" id="search-box-container">
          <div class="input-group">
            <input id="search-box" name="search-query" placeholder="Search..." aria-label="Search" minlength="2" class="form-control" />
            <span class="input-group-btn">
              <button class="btn btn-default" type="submit" title="Search"><img src="fonts/search.svg" alt="Search!" /></button>
              <a class="btn btn-default" id="search-help-button" title="Help" onclick="toggleSearchHelpText()"><img src="fonts/info.svg" alt="Help!" /></a>
            </span>
          </div>
        </form>

        <div class="rst-admonition hint" id="search-help-box">
          <p class="rst-last">
      
            Search bar offers the following options:
            <ul>   
                <li>
                  <strong>Term presence.</strong> The below example searches for documents that 
                    must contain “foo”, might contain “bar” and must not contain “baz”:
                  <br /> <code>'+foo bar -baz'</code>
                </li> 

                <li>
                  <strong>Wildcards.</strong> The below example searches for documents with words beginning with “foo”:
                  <br /> <code>'foo*'</code>
                </li> 

                <li>
                  <strong>Search in specific fields.</strong> The following search matches all documents 
                  that contains "foo" in their full dotted name and with “bar” in any field:
                  <br /> <code>'+fullName:*foo* +bar'</code>

                  <p>
                    Possible fields: 'name', 'docstring', 'fullName'.
                  </p>
                </li>

                <li>
                  <strong>Fuzzy matches.</strong> The following search matches all documents 
                  that have a word within 1 edit distance of “foo”:
                  <br /> <code>'foo~1'</code>
                </li>
            </ul>

          </p>
        </div>

      </div>


    </div>
  </div>

  <script>
 
    function toggleSearchHelpText() {
        document.body.classList.toggle("search-help-hidden");
    }
    // Init search and help text
    document.getElementById('search-box-container').style.display = 'block';
    document.getElementById('search-help-box').style.display = 'block';
    document.body.classList.add("search-help-hidden");

  </script>

</nav>

    

    <div class="container">

      <div class="page-header">
        <h1 class="module"><code><code><a href="mypy.html">mypy</a></code><wbr></wbr>.<code><a href="mypy.build.html">build</a></code></code></h1>
        <div id="showPrivate">
          <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
        </div>
      </div>

      <div class="categoryHeader">
        module documentation
      </div>

      <div class="extrasDocstring">
        <a href="https://github.com/python/mypy/tree/v0.930/mypy/build.py" class="sourceLink">(source)</a>
        <p></p>
      </div>

      <div class="moduleDocstring">
        <div><p>Facilities to analyze entire programs, including imported modules.</p>
<p>Parse and analyze the source files of a program in the correct order
(based on file dependencies), and collect the results.</p>
<p>This module only directs a build, which is performed in multiple passes per
file.  The individual passes are implemented in separate modules.</p>
<p>The function build() is the main interface to this module.</p>
</div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id12">
  
  
  <tr class="class">
    
    <td>Class</td>
    <td><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td>
    <td><span>This class holds shared state for building a mypy program.</span></td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="mypy.build.BuildResult.html">BuildResult</a></code></td>
    <td><span>The result of a successful build.</span></td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="mypy.build.BuildSourceSet.html">BuildSourceSet</a></code></td>
    <td><span>Efficiently test a file's membership in the set of build sources.</span></td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="mypy.build.ModuleNotFound.html">ModuleNotFound</a></code></td>
    <td><span>Control flow exception to signal that a module was not found.</span></td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="mypy.build.NodeInfo.html">NodeInfo</a></code></td>
    <td><span>Some info about a node in the graph of SCCs.</span></td>
  </tr><tr class="class">
    
    <td>Class</td>
    <td><code><a href="mypy.build.State.html">State</a></code></td>
    <td><span>The state for a module.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#add_catch_all_gitignore">add_catch_all_gitignore</a></code></td>
    <td><span>Add catch-all .gitignore to an existing directory.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#build">build</a></code></td>
    <td><span>Analyze a program.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#cache_meta_from_dict">cache_meta_from_dict</a></code></td>
    <td><span>Build a CacheMeta object from a json metadata dictionary</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#compute_hash">compute_hash</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#create_metastore">create_metastore</a></code></td>
    <td><span>Create the appropriate metadata store.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#default_data_dir">default_data_dir</a></code></td>
    <td><span>Returns directory containing typeshed directory.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#delete_cache">delete_cache</a></code></td>
    <td><span>Delete cache files for a module.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#deps_filtered">deps_filtered</a></code></td>
    <td><span>Filter dependencies for id with pri &lt; pri_max.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#deps_to_json">deps_to_json</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#dispatch">dispatch</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#dump_graph">dump_graph</a></code></td>
    <td><span>Dump the graph as a JSON string to stdout.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#exclude_from_backups">exclude_from_backups</a></code></td>
    <td><span>Exclude the directory from various archives and backups supporting CACHEDIR.TAG.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#exist_added_packages">exist_added_packages</a></code></td>
    <td><span>Find if there are any newly added packages that were previously suppressed.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#find_cache_meta">find_cache_meta</a></code></td>
    <td><span>Find cache data for a module.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#find_config_file_line_number">find_config_file_line_number</a></code></td>
    <td><span>Return the approximate location of setting_name within mypy config file.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#find_module_and_diagnose">find_module_and_diagnose</a></code></td>
    <td><span>Find a module by name, respecting follow_imports and producing diagnostics.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#find_module_simple">find_module_simple</a></code></td>
    <td><span>Find a filesystem path for module <code><a href="mypy.build.State.html#id">id</a></code> or <code>None</code> if not found.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#find_module_with_reason">find_module_with_reason</a></code></td>
    <td><span>Find a filesystem path for module <code><a href="mypy.build.State.html#id">id</a></code> or the reason it can't be found.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#generate_deps_for_cache">generate_deps_for_cache</a></code></td>
    <td><span>Generate fine-grained dependencies into a form suitable for serializing.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#get_cache_names">get_cache_names</a></code></td>
    <td><span>Return the file names for the cache files.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#import_priority">import_priority</a></code></td>
    <td><span>Compute import priority from an import node.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#in_partial_package">in_partial_package</a></code></td>
    <td><span>Check if a missing module can potentially be a part of a package.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#invert_deps">invert_deps</a></code></td>
    <td><span>Splits fine-grained dependencies based on the module of the trigger.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#json_dumps">json_dumps</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#load_graph">load_graph</a></code></td>
    <td><span>Given some source files, load the full dependency graph.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#load_plugins">load_plugins</a></code></td>
    <td><span>Load all configured plugins.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#load_plugins_from_config">load_plugins_from_config</a></code></td>
    <td><span>Load all configured plugins.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#log_configuration">log_configuration</a></code></td>
    <td><span>Output useful configuration information to LOG and TRACE</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#missing_stubs_file">missing_stubs_file</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#module_not_found">module_not_found</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#normpath">normpath</a></code></td>
    <td><span>Convert path to absolute; but to relative in bazel mode.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#order_ascc">order_ascc</a></code></td>
    <td><span>Come up with the ideal processing order within an SCC.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#process_fresh_modules">process_fresh_modules</a></code></td>
    <td><span>Process the modules in one group of modules from their cached data.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#process_graph">process_graph</a></code></td>
    <td><span>Process everything in dependency order.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#process_stale_scc">process_stale_scc</a></code></td>
    <td><span>Process the modules in one SCC from source code.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#read_deps_cache">read_deps_cache</a></code></td>
    <td><span>Read and validate the fine-grained dependencies cache.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#read_plugins_snapshot">read_plugins_snapshot</a></code></td>
    <td><span>Read cached snapshot of versions and hashes of plugins from previous run.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#read_quickstart_file">read_quickstart_file</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#record_missing_stub_packages">record_missing_stub_packages</a></code></td>
    <td><span>Write a file containing missing stub packages.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#skipping_ancestor">skipping_ancestor</a></code></td>
    <td><span>Produce an error for an ancestor ignored due to --follow_imports=error</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#skipping_module">skipping_module</a></code></td>
    <td><span>Produce an error for an import ignored due to --follow_imports=error</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#sorted_components">sorted_components</a></code></td>
    <td><span>Return the graph's SCCs, topologically sorted by dependencies.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#strongly_connected_components">strongly_connected_components</a></code></td>
    <td><span>Compute Strongly Connected Components of a directed graph.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#take_module_snapshot">take_module_snapshot</a></code></td>
    <td><span>Take plugin module snapshot by recording its version and hash.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#topsort">topsort</a></code></td>
    <td><span>Topological sort.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#validate_meta">validate_meta</a></code></td>
    <td><span>Checks whether the cached AST of this module can be used.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#write_cache">write_cache</a></code></td>
    <td><span>Write cache files for a module.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#write_deps_cache">write_deps_cache</a></code></td>
    <td><span>Write cache files for fine-grained dependencies.</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#write_plugins_snapshot">write_plugins_snapshot</a></code></td>
    <td><span>Write snapshot of versions and hashes of currently active plugins.</span></td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#CacheMeta">CacheMeta</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#CORE_BUILTIN_MODULES">CORE_BUILTIN_MODULES</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#DEBUG_FINE_GRAINED">DEBUG_FINE_GRAINED</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#DEPS_META_FILE">DEPS_META_FILE</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#DEPS_ROOT_FILE">DEPS_ROOT_FILE</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#FAKE_ROOT_MODULE">FAKE_ROOT_MODULE</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#FgDepMeta">FgDepMeta</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#Graph">Graph</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#PLUGIN_SNAPSHOT_FILE">PLUGIN_SNAPSHOT_FILE</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#PRI_ALL">PRI_ALL</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#PRI_HIGH">PRI_HIGH</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#PRI_INDIRECT">PRI_INDIRECT</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#PRI_LOW">PRI_LOW</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#PRI_MED">PRI_MED</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#PRI_MYPY">PRI_MYPY</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#T">T</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_build">_build</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_cache_dir_prefix">_cache_dir_prefix</a></code></td>
    <td><span>Get current cache directory (or file if id is given).</span></td>
  </tr><tr class="function private">
    
    <td>Function</td>
    <td><code><a href="#_load_json_file">_load_json_file</a></code></td>
    <td><span>A simple helper to read a JSON file with logging.</span></td>
  </tr>
</table>
        

          
      </div>

      <div id="childList">

        <div class="basefunction">
  
  
  <a name="mypy.build.add_catch_all_gitignore">
    
  </a>
  <a name="add_catch_all_gitignore">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">add_catch_all_gitignore</span>(target_dir):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L1128">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Add catch-all .gitignore to an existing directory.</p>
<p>No-op if the .gitignore already exists.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">target_dir:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.build">
    
  </a>
  <a name="build">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">build</span>(sources, options, alt_lib_path=None, flush_errors=None, fscache=None, stdout=None, stderr=None, extra_plugins=None):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L136">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Analyze a program.</p>
<p>A single call to build performs parsing, semantic analysis and optionally
type checking for the program <em>and</em> all imported modules, recursively.</p>
<p>Return BuildResult if successful or only non-blocking errors were found;
otherwise raise CompileError.</p>
<p>If a flush_errors callback is provided, all error messages will be
passed to it and the errors and messages fields of BuildResult and
CompileError (respectively) will be empty. Otherwise those fields will
report any error messages.</p>
<dl class="rst-docutils">
<dt>Args:</dt>
<dd><p class="rst-first">sources: list of sources to build
options: build options
alt_lib_path: an additional directory for looking up library modules</p>
<blockquote>
(takes precedence over other directories)</blockquote>
<p class="rst-last">flush_errors: optional function to flush errors after a file is processed
fscache: optionally a file-system cacher</p>
</dd>
</dl>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">sources:</span><code>List[<wbr></wbr><a href="mypy.modulefinder.BuildSource.html">BuildSource</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">options:</span><code><a href="mypy.options.Options.html">Options</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">alt_lib_path:</span><code>Optional[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">flush_errors:</span><code>Optional[<wbr></wbr>Callable[<wbr></wbr>[<wbr></wbr>List[<wbr></wbr>str], <wbr></wbr>bool], <wbr></wbr>None]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">fscache:</span><code>Optional[<wbr></wbr><a href="mypy.fscache.FileSystemCache.html">FileSystemCache</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">stdout:</span><code>Optional[<wbr></wbr>TextIO]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">stderr:</span><code>Optional[<wbr></wbr>TextIO]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">extra_plugins:</span><code>Optional[<wbr></wbr>Sequence[<wbr></wbr><a href="mypy.plugin.Plugin.html">Plugin</a>]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code><a href="mypy.build.BuildResult.html">BuildResult</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.cache_meta_from_dict">
    
  </a>
  <a name="cache_meta_from_dict">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">cache_meta_from_dict</span>(meta, data_json):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L327">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Build a CacheMeta object from a json metadata dictionary</p>
<dl class="rst-docutils">
<dt>Args:</dt>
<dd>meta: JSON metadata read from the metadata cache file
data_json: Path to the .data.json file containing the AST trees</dd>
</dl>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">meta:</span><code>Dict[<wbr></wbr>str, <wbr></wbr>Any]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">data_json:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code><a href="#CacheMeta">CacheMeta</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.compute_hash">
    
  </a>
  <a name="compute_hash">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">compute_hash</span>(text):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L1430">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">text:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.create_metastore">
    
  </a>
  <a name="create_metastore">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">create_metastore</span>(options):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L1158">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div>Create the appropriate metadata store.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">options:</span><code><a href="mypy.options.Options.html">Options</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code><a href="mypy.metastore.MetadataStore.html">MetadataStore</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.default_data_dir">
    
  </a>
  <a name="default_data_dir">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">default_data_dir</span>():
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L279">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div>Returns directory containing typeshed directory.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.delete_cache">
    
  </a>
  <a name="delete_cache">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">delete_cache</span>(id, path, manager):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L1574">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Delete cache files for a module.</p>
<p>The cache files for a module are deleted when mypy finds errors there.
This avoids inconsistent states with cache files from different mypy runs,
see #4043 for an example.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">id:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">path:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.deps_filtered">
    
  </a>
  <a name="deps_filtered">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">deps_filtered</span>(graph, vertices, id, pri_max):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L3208">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div>Filter dependencies for id with pri &lt; pri_max.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">graph:</span><code><a href="#Graph">Graph</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">vertices:</span><code>AbstractSet[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">id:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">pri_max:</span><code>int</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>List[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.deps_to_json">
    
  </a>
  <a name="deps_to_json">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">deps_to_json</span>(x):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L865">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">x:</span><code>Dict[<wbr></wbr>str, <wbr></wbr>Set[<wbr></wbr>str]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.dispatch">
    
  </a>
  <a name="dispatch">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">dispatch</span>(sources, manager, stdout):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L2657">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">sources:</span><code>List[<wbr></wbr><a href="mypy.modulefinder.BuildSource.html">BuildSource</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">stdout:</span><code>TextIO</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code><a href="#Graph">Graph</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.dump_graph">
    
  </a>
  <a name="dump_graph">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">dump_graph</span>(graph, stdout=None):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L2758">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Dump the graph as a JSON string to stdout.</p>
<p>This copies some of the work by process_graph()
(sorted_components() and order_ascc()).</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">graph:</span><code><a href="#Graph">Graph</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">stdout:</span><code>Optional[<wbr></wbr>TextIO]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.exclude_from_backups">
    
  </a>
  <a name="exclude_from_backups">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">exclude_from_backups</span>(target_dir):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L1142">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Exclude the directory from various archives and backups supporting CACHEDIR.TAG.</p>
<p>If the CACHEDIR.TAG file exists the function is a no-op.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">target_dir:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.exist_added_packages">
    
  </a>
  <a name="exist_added_packages">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">exist_added_packages</span>(suppressed, manager, options):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L2495">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Find if there are any newly added packages that were previously suppressed.</p>
<p>Exclude everything not in build for follow-imports=skip.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">suppressed:</span><code>List[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">options:</span><code><a href="mypy.options.Options.html">Options</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>bool</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.find_cache_meta">
    
  </a>
  <a name="find_cache_meta">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">find_cache_meta</span>(id, path, manager):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L1203">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Find cache data for a module.</p>
<dl class="rst-docutils">
<dt>Args:</dt>
<dd>id: module ID
path: module path
manager: the build manager (for pyversion, log/trace, and build options)</dd>
<dt>Returns:</dt>
<dd>A CacheMeta instance if the cache data was found and appears
valid; otherwise None.</dd>
</dl>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">id:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">path:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Optional[<wbr></wbr><a href="#CacheMeta">CacheMeta</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.find_config_file_line_number">
    
  </a>
  <a name="find_config_file_line_number">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">find_config_file_line_number</span>(path, section, setting_name):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L506">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Return the approximate location of setting_name within mypy config file.</p>
<p>Return -1 if can't determine the line unambiguously.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">path:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">section:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">setting_name:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>int</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.find_module_and_diagnose">
    
  </a>
  <a name="find_module_and_diagnose">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">find_module_and_diagnose</span>(manager, id, options, caller_state=None, caller_line=0, ancestor_for=None, root_source=False, skip_diagnose=False):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L2378">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Find a module by name, respecting follow_imports and producing diagnostics.</p>
<p>If the module is not found, then the ModuleNotFound exception is raised.</p>
<dl class="rst-docutils">
<dt>Args:</dt>
<dd><p class="rst-first">id: module to find
options: the options for the module being loaded
caller_state: the state of the importing module, if applicable
caller_line: the line number of the import
ancestor_for: the child module this is an ancestor of, if applicable
root_source: whether this source was specified on the command line
skip_diagnose: skip any error diagnosis and reporting (but ModuleNotFound is</p>
<blockquote class="rst-last">
still raised if the module is missing)</blockquote>
</dd>
</dl>
<p>The specified value of follow_imports for a module can be overridden
if the module is specified on the command line or if it is a stub,
so we compute and return the "effective" follow_imports of the module.</p>
<p>Returns a tuple containing (file path, target's effective follow_imports setting)</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">id:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">options:</span><code><a href="mypy.options.Options.html">Options</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">caller_state:</span><code>Optional[<wbr></wbr><a href="mypy.build.State.html">State</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">caller_line:</span><code>int</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">ancestor_for:</span><code>Optional[<wbr></wbr><a href="mypy.build.State.html">State</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">root_source:</span><code>bool</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">skip_diagnose:</span><code>bool</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Tuple[<wbr></wbr>str, <wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.find_module_simple">
    
  </a>
  <a name="find_module_simple">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">find_module_simple</span>(id, manager):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L2519">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div>Find a filesystem path for module <code><a href="mypy.build.State.html#id">id</a></code> or <code>None</code> if not found.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">id:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Optional[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.find_module_with_reason">
    
  </a>
  <a name="find_module_with_reason">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">find_module_with_reason</span>(id, manager):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L2527">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div>Find a filesystem path for module <code><a href="mypy.build.State.html#id">id</a></code> or the reason it can't be found.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">id:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code><a href="mypy.modulefinder.html#ModuleSearchResult">ModuleSearchResult</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.generate_deps_for_cache">
    
  </a>
  <a name="generate_deps_for_cache">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">generate_deps_for_cache</span>(manager, graph):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L970">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Generate fine-grained dependencies into a form suitable for serializing.</p>
<p>This does a couple things:
1. Splits fine-grained deps based on the module of the trigger
2. For each module we generated fine-grained deps for, load any previous</p>
<blockquote>
deps and merge them in.</blockquote>
<p>Returns a dictionary from module ids to all dependencies on that
module. Dependencies not associated with a module in the build will be
associated with the nearest parent module that is in the build, or the
fake module FAKE_ROOT_MODULE if none are.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">graph:</span><code><a href="#Graph">Graph</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Dict[<wbr></wbr>str, <wbr></wbr>Dict[<wbr></wbr>str, <wbr></wbr>Set[<wbr></wbr>str]]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.get_cache_names">
    
  </a>
  <a name="get_cache_names">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">get_cache_names</span>(id, path, options):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L1167">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Return the file names for the cache files.</p>
<dl class="rst-docutils">
<dt>Args:</dt>
<dd>id: module ID
path: module path
cache_dir: cache directory
pyversion: Python version (major, minor)</dd>
<dt>Returns:</dt>
<dd>A tuple with the file names to be used for the meta JSON, the
data JSON, and the fine-grained deps JSON, respectively.</dd>
</dl>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">id:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">path:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">options:</span><code><a href="mypy.options.Options.html">Options</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Tuple[<wbr></wbr>str, <wbr></wbr>str, <wbr></wbr>Optional[<wbr></wbr>str]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.import_priority">
    
  </a>
  <a name="import_priority">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">import_priority</span>(imp, toplevel_priority):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L366">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div>Compute import priority from an import node.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">imp:</span><code><a href="mypy.nodes.ImportBase.html">ImportBase</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">toplevel_priority:</span><code>int</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>int</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.in_partial_package">
    
  </a>
  <a name="in_partial_package">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">in_partial_package</span>(id, manager):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L2535">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Check if a missing module can potentially be a part of a package.</p>
<p>This checks if there is any existing parent __init__.pyi stub that
defines a module-level __getattr__ (a.k.a. partial stub package).</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">id:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>bool</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.invert_deps">
    
  </a>
  <a name="invert_deps">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">invert_deps</span>(deps, graph):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L943">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Splits fine-grained dependencies based on the module of the trigger.</p>
<p>Returns a dictionary from module ids to all dependencies on that
module. Dependencies not associated with a module in the build will be
associated with the nearest parent module that is in the build, or the
fake module FAKE_ROOT_MODULE if none are.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">deps:</span><code>Dict[<wbr></wbr>str, <wbr></wbr>Set[<wbr></wbr>str]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">graph:</span><code><a href="#Graph">Graph</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Dict[<wbr></wbr>str, <wbr></wbr>Dict[<wbr></wbr>str, <wbr></wbr>Set[<wbr></wbr>str]]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.json_dumps">
    
  </a>
  <a name="json_dumps">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">json_dumps</span>(obj, debug_cache):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L1439">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">obj:</span><code>Any</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">debug_cache:</span><code>bool</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.load_graph">
    
  </a>
  <a name="load_graph">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">load_graph</span>(sources, manager, old_graph=None, new_modules=None):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L2796">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Given some source files, load the full dependency graph.</p>
<p>If an old_graph is passed in, it is used as the starting point and
modified during graph loading.</p>
<p>If a new_modules is passed in, any modules that are loaded are
added to the list. This is an argument and not a return value
so that the caller can access it even if load_graph fails.</p>
<p>As this may need to parse files, this can raise CompileError in case
there are syntax errors.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">sources:</span><code>List[<wbr></wbr><a href="mypy.modulefinder.BuildSource.html">BuildSource</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">old_graph:</span><code>Optional[<wbr></wbr><a href="#Graph">Graph</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">new_modules:</span><code>Optional[<wbr></wbr>List[<wbr></wbr><a href="mypy.build.State.html">State</a>]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code><a href="#Graph">Graph</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.load_plugins">
    
  </a>
  <a name="load_plugins">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">load_plugins</span>(options, errors, stdout, extra_plugins):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L466">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Load all configured plugins.</p>
<p>Return a plugin that encapsulates all plugins chained together. Always
at least include the default plugin (it's last in the chain).
The second return value is a snapshot of versions/hashes of loaded user
plugins (for cache validation).</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">options:</span><code><a href="mypy.options.Options.html">Options</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">errors:</span><code><a href="mypy.errors.Errors.html">Errors</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">stdout:</span><code>TextIO</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">extra_plugins:</span><code>Sequence[<wbr></wbr><a href="mypy.plugin.Plugin.html">Plugin</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Tuple[<wbr></wbr><a href="mypy.plugin.Plugin.html">Plugin</a>, <wbr></wbr>Dict[<wbr></wbr>str, <wbr></wbr>str]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.load_plugins_from_config">
    
  </a>
  <a name="load_plugins_from_config">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">load_plugins_from_config</span>(options, errors, stdout):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L378">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Load all configured plugins.</p>
<p>Return a list of all the loaded plugins from the config file.
The second return value is a snapshot of versions/hashes of loaded user
plugins (for cache validation).</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">options:</span><code><a href="mypy.options.Options.html">Options</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">errors:</span><code><a href="mypy.errors.Errors.html">Errors</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">stdout:</span><code>TextIO</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Tuple[<wbr></wbr>List[<wbr></wbr><a href="mypy.plugin.Plugin.html">Plugin</a>], <wbr></wbr>Dict[<wbr></wbr>str, <wbr></wbr>str]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.log_configuration">
    
  </a>
  <a name="log_configuration">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">log_configuration</span>(manager, sources):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L2622">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div>Output useful configuration information to LOG and TRACE<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">sources:</span><code>List[<wbr></wbr><a href="mypy.modulefinder.BuildSource.html">BuildSource</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.missing_stubs_file">
    
  </a>
  <a name="missing_stubs_file">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">missing_stubs_file</span>(cache_dir):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L3313">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">cache_dir:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.module_not_found">
    
  </a>
  <a name="module_not_found">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">module_not_found</span>(manager, line, caller_state, target, reason):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L2564">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">line:</span><code>int</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">caller_state:</span><code><a href="mypy.build.State.html">State</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">target:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">reason:</span><code><a href="mypy.modulefinder.ModuleNotFoundReason.html">ModuleNotFoundReason</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.normpath">
    
  </a>
  <a name="normpath">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">normpath</span>(path, options):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L284">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Convert path to absolute; but to relative in bazel mode.</p>
<p>(Bazel's distributed cache doesn't like filesystem metadata to
end up in output files.)</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">path:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">options:</span><code><a href="mypy.options.Options.html">Options</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.order_ascc">
    
  </a>
  <a name="order_ascc">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">order_ascc</span>(graph, ascc, pri_max=PRI_ALL):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L3061">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Come up with the ideal processing order within an SCC.</p>
<p>Using the priorities assigned by all_imported_modules_in_file(),
try to reduce the cycle to a DAG, by omitting arcs representing
dependencies of lower priority.</p>
<p>In the simplest case, if we have A &lt;--&gt; B where A has a top-level
"import B" (medium priority) but B only has the reverse "import A"
inside a function (low priority), we turn the cycle into a DAG by
dropping the B --&gt; A arc, which leaves only A --&gt; B.</p>
<p>If all arcs have the same priority, we fall back to sorting by
reverse global order (the order in which modules were first
encountered).</p>
<p>The algorithm is recursive, as follows: when as arcs of different
priorities are present, drop all arcs of the lowest priority,
identify SCCs in the resulting graph, and apply the algorithm to
each SCC thus found.  The recursion is bounded because at each
recursion the spread in priorities is (at least) one less.</p>
<p>In practice there are only a few priority levels (less than a
dozen) and in the worst case we just carry out the same algorithm
for finding SCCs N times.  Thus the complexity is no worse than
the complexity of the original SCC-finding algorithm -- see
strongly_connected_components() below for a reference.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">graph:</span><code><a href="#Graph">Graph</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">ascc:</span><code>AbstractSet[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">pri_max:</span><code>int</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>List[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.process_fresh_modules">
    
  </a>
  <a name="process_fresh_modules">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">process_fresh_modules</span>(graph, modules, manager):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L3108">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Process the modules in one group of modules from their cached data.</p>
<p>This can be used to process an SCC of modules
This involves loading the tree from JSON and then doing various cleanups.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">graph:</span><code><a href="#Graph">Graph</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">modules:</span><code>List[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.process_graph">
    
  </a>
  <a name="process_graph">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">process_graph</span>(graph, manager):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L2924">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div>Process everything in dependency order.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">graph:</span><code><a href="#Graph">Graph</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.process_stale_scc">
    
  </a>
  <a name="process_stale_scc">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">process_stale_scc</span>(graph, scc, manager):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L3124">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Process the modules in one SCC from source code.</p>
<p>Exception: If quick_and_dirty is set, use the cache for fresh modules.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">graph:</span><code><a href="#Graph">Graph</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">scc:</span><code>List[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.read_deps_cache">
    
  </a>
  <a name="read_deps_cache">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">read_deps_cache</span>(manager, graph):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L1044">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Read and validate the fine-grained dependencies cache.</p>
<p>See the write_deps_cache documentation for more information on
the details of the cache.</p>
<p>Returns None if the cache was invalid in some way.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">graph:</span><code><a href="#Graph">Graph</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Optional[<wbr></wbr>Dict[<wbr></wbr>str, <wbr></wbr><a href="#FgDepMeta">FgDepMeta</a>]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.read_plugins_snapshot">
    
  </a>
  <a name="read_plugins_snapshot">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">read_plugins_snapshot</span>(manager):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L1010">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div>Read cached snapshot of versions and hashes of plugins from previous run.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Optional[<wbr></wbr>Dict[<wbr></wbr>str, <wbr></wbr>str]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.read_quickstart_file">
    
  </a>
  <a name="read_quickstart_file">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">read_quickstart_file</span>(options, stdout):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L1024">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">options:</span><code><a href="mypy.options.Options.html">Options</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">stdout:</span><code>TextIO</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Optional[<wbr></wbr>Dict[<wbr></wbr>str, <wbr></wbr>Tuple[<wbr></wbr>float, <wbr></wbr>int, <wbr></wbr>str]]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.record_missing_stub_packages">
    
  </a>
  <a name="record_missing_stub_packages">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">record_missing_stub_packages</span>(cache_dir, missing_stub_packages):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L3317">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Write a file containing missing stub packages.</p>
<p>This allows a subsequent "mypy --install-types" run (without other arguments)
to install missing stub packages.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">cache_dir:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">missing_stub_packages:</span><code>Set[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.skipping_ancestor">
    
  </a>
  <a name="skipping_ancestor">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">skipping_ancestor</span>(manager, id, path, ancestor_for):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L2607">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div>Produce an error for an ancestor ignored due to --follow_imports=error<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">id:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">path:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">ancestor_for:</span><code><a href="mypy.build.State.html">State</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.skipping_module">
    
  </a>
  <a name="skipping_module">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">skipping_module</span>(manager, line, caller_state, id, path):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L2591">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div>Produce an error for an import ignored due to --follow_imports=error<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">line:</span><code>int</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">caller_state:</span><code>Optional[<wbr></wbr><a href="mypy.build.State.html">State</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">id:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">path:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.sorted_components">
    
  </a>
  <a name="sorted_components">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">sorted_components</span>(graph, vertices=None, pri_max=PRI_ALL):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L3169">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Return the graph's SCCs, topologically sorted by dependencies.</p>
<p>The sort order is from leaves (nodes without dependencies) to
roots (nodes on which no other nodes depend).</p>
<p>This works for a subset of the full dependency graph too;
dependencies that aren't present in graph.keys() are ignored.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">graph:</span><code><a href="#Graph">Graph</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">vertices:</span><code>Optional[<wbr></wbr>AbstractSet[<wbr></wbr>str]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">pri_max:</span><code>int</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>List[<wbr></wbr>AbstractSet[<wbr></wbr>str]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.strongly_connected_components">
    
  </a>
  <a name="strongly_connected_components">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">strongly_connected_components</span>(vertices, edges):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L3218">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Compute Strongly Connected Components of a directed graph.</p>
<dl class="rst-docutils">
<dt>Args:</dt>
<dd>vertices: the labels for the vertices
edges: for each vertex, gives the target vertices of its outgoing edges</dd>
<dt>Returns:</dt>
<dd>An iterator yielding strongly connected components, each
represented as a set of vertices.  Each input vertex will occur
exactly once; vertices not part of a SCC are returned as
singleton sets.</dd>
</dl>
<p>From <a class="rst-reference external" href="http://code.activestate.com/recipes/578507/" target="_top">http://code.activestate.com/recipes/578507/</a>.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">vertices:</span><code>AbstractSet[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">edges:</span><code>Dict[<wbr></wbr>str, <wbr></wbr>List[<wbr></wbr>str]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Iterator[<wbr></wbr>Set[<wbr></wbr>str]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.take_module_snapshot">
    
  </a>
  <a name="take_module_snapshot">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">take_module_snapshot</span>(module):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L490">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Take plugin module snapshot by recording its version and hash.</p>
<p>We record _both_ hash and the version to detect more possible changes
(e.g. if there is a change in modules imported by a plugin).</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">module:</span><code>types.ModuleType</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.topsort">
    
  </a>
  <a name="topsort">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">topsort</span>(data):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L3266">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Topological sort.</p>
<dl class="rst-docutils">
<dt>Args:</dt>
<dd><dl class="rst-first rst-last rst-docutils">
<dt>data: A map from vertices to all vertices that it has an edge</dt>
<dd>connecting it to.  NOTE: This data structure
is modified in place -- for normalization purposes,
self-dependencies are removed and entries representing
orphans are added.</dd>
</dl>
</dd>
<dt>Returns:</dt>
<dd>An iterator yielding sets of vertices that have an equivalent
ordering.</dd>
<dt>Example:</dt>
<dd><p class="rst-first">Suppose the input has the following structure:</p>
<blockquote>
{A: {B, C}, B: {D}, C: {D}}</blockquote>
<p>This is normalized to:</p>
<blockquote>
{A: {B, C}, B: {D}, C: {D}, D: {}}</blockquote>
<p>The algorithm will yield the following values:</p>
<blockquote class="rst-last">
{D}
{B, C}
{A}</blockquote>
</dd>
</dl>
<p>From <a class="rst-reference external" href="http://code.activestate.com/recipes/577413/" target="_top">http://code.activestate.com/recipes/577413/</a>.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">data:</span><code>Dict[<wbr></wbr><a href="#T">T</a>, <wbr></wbr>Set[<wbr></wbr><a href="#T">T</a>]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Iterable[<wbr></wbr>Set[<wbr></wbr><a href="#T">T</a>]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.validate_meta">
    
  </a>
  <a name="validate_meta">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">validate_meta</span>(meta, id, path, ignore_all, manager):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L1287">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Checks whether the cached AST of this module can be used.</p>
<dl class="rst-docutils">
<dt>Returns:</dt>
<dd>None, if the cached AST is unusable.
Original meta, if mtime/size matched.
Meta with mtime updated to match source file, if hash/size matched but mtime/path didn't.</dd>
</dl>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">meta:</span><code>Optional[<wbr></wbr><a href="#CacheMeta">CacheMeta</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">id:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">path:</span><code>Optional[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">ignore_all:</span><code>bool</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Optional[<wbr></wbr><a href="#CacheMeta">CacheMeta</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.write_cache">
    
  </a>
  <a name="write_cache">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">write_cache</span>(id, path, tree, dependencies, suppressed, dep_prios, dep_lines, old_interface_hash, source_hash, ignore_all, manager):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L1446">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Write cache files for a module.</p>
<p>Note that this mypy's behavior is still correct when any given
write_cache() call is replaced with a no-op, so error handling
code that bails without writing anything is okay.</p>
<dl class="rst-docutils">
<dt>Args:</dt>
<dd>id: module ID
path: module path
tree: the fully checked module data
dependencies: module IDs on which this module depends
suppressed: module IDs which were suppressed as dependencies
dep_prios: priorities (parallel array to dependencies)
dep_lines: import line locations (parallel array to dependencies)
old_interface_hash: the hash from the previous version of the data cache file
source_hash: the hash of the source code
ignore_all: the ignore_all flag for this module
manager: the build manager (for pyversion, log/trace)</dd>
<dt>Returns:</dt>
<dd>A tuple containing the interface hash and CacheMeta
corresponding to the metadata that was written (the latter may
be None if the cache could not be written).</dd>
</dl>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">id:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">path:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">tree:</span><code><a href="mypy.nodes.MypyFile.html">MypyFile</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">dependencies:</span><code>List[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">suppressed:</span><code>List[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">dep_prios:</span><code>List[<wbr></wbr>int]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">dep_lines:</span><code>List[<wbr></wbr>int]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">old_interface_hash:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">source_hash:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">ignore_all:</span><code>bool</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Tuple[<wbr></wbr>str, <wbr></wbr>Optional[<wbr></wbr><a href="#CacheMeta">CacheMeta</a>]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.write_deps_cache">
    
  </a>
  <a name="write_deps_cache">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">write_deps_cache</span>(rdeps, manager, graph):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L879">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Write cache files for fine-grained dependencies.</p>
<p>Serialize fine-grained dependencies map for fine grained mode.</p>
<p>Dependencies on some module 'm' is stored in the dependency cache
file m.deps.json.  This entails some spooky action at a distance:
if module 'n' depends on 'm', that produces entries in m.deps.json.
When there is a dependency on a module that does not exist in the
build, it is stored with its first existing parent module. If no
such module exists, it is stored with the fake module FAKE_ROOT_MODULE.</p>
<p>This means that the validity of the fine-grained dependency caches
are a global property, so we store validity checking information for
fine-grained dependencies in a global cache file:</p>
<blockquote>
<ul class="rst-simple">
<li>We take a snapshot of current sources to later check consistency
between the fine-grained dependency cache and module cache metadata</li>
<li>We store the mtime of all of the dependency files to verify they
haven't changed</li>
</ul>
</blockquote>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">rdeps:</span><code>Dict[<wbr></wbr>str, <wbr></wbr>Dict[<wbr></wbr>str, <wbr></wbr>Set[<wbr></wbr>str]]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">graph:</span><code><a href="#Graph">Graph</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.build.write_plugins_snapshot">
    
  </a>
  <a name="write_plugins_snapshot">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">write_plugins_snapshot</span>(manager):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L1002">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div>Write snapshot of versions and hashes of currently active plugins.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basevariable">
  
  
  <a name="mypy.build.CacheMeta">
    
  </a>
  <a name="CacheMeta">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">CacheMeta</span> =
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L299">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basevariable">
  
  
  <a name="mypy.build.CORE_BUILTIN_MODULES">
    
  </a>
  <a name="CORE_BUILTIN_MODULES">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">CORE_BUILTIN_MODULES</span>: <code>Final</code> =
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L73">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basevariable">
  
  
  <a name="mypy.build.DEBUG_FINE_GRAINED">
    
  </a>
  <a name="DEBUG_FINE_GRAINED">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">DEBUG_FINE_GRAINED</span>: <code>Final</code> =
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L70">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basevariable">
  
  
  <a name="mypy.build.DEPS_META_FILE">
    
  </a>
  <a name="DEPS_META_FILE">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">DEPS_META_FILE</span>: <code>Final</code> =
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L870">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basevariable">
  
  
  <a name="mypy.build.DEPS_ROOT_FILE">
    
  </a>
  <a name="DEPS_ROOT_FILE">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">DEPS_ROOT_FILE</span>: <code>Final</code> =
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L872">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basevariable">
  
  
  <a name="mypy.build.FAKE_ROOT_MODULE">
    
  </a>
  <a name="FAKE_ROOT_MODULE">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">FAKE_ROOT_MODULE</span>: <code>Final</code> =
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L876">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basevariable">
  
  
  <a name="mypy.build.FgDepMeta">
    
  </a>
  <a name="FgDepMeta">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">FgDepMeta</span> =
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L324">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basevariable">
  
  
  <a name="mypy.build.Graph">
    
  </a>
  <a name="Graph">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">Graph</span>: <code>_TypeAlias</code> =
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L85">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basevariable">
  
  
  <a name="mypy.build.PLUGIN_SNAPSHOT_FILE">
    
  </a>
  <a name="PLUGIN_SNAPSHOT_FILE">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">PLUGIN_SNAPSHOT_FILE</span>: <code>Final</code> =
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L999">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basevariable">
  
  
  <a name="mypy.build.PRI_ALL">
    
  </a>
  <a name="PRI_ALL">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">PRI_ALL</span>: <code>Final</code> =
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L363">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basevariable">
  
  
  <a name="mypy.build.PRI_HIGH">
    
  </a>
  <a name="PRI_HIGH">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">PRI_HIGH</span>: <code>Final</code> =
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L358">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basevariable">
  
  
  <a name="mypy.build.PRI_INDIRECT">
    
  </a>
  <a name="PRI_INDIRECT">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">PRI_INDIRECT</span>: <code>Final</code> =
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L362">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basevariable">
  
  
  <a name="mypy.build.PRI_LOW">
    
  </a>
  <a name="PRI_LOW">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">PRI_LOW</span>: <code>Final</code> =
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L360">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basevariable">
  
  
  <a name="mypy.build.PRI_MED">
    
  </a>
  <a name="PRI_MED">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">PRI_MED</span>: <code>Final</code> =
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L359">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basevariable">
  
  
  <a name="mypy.build.PRI_MYPY">
    
  </a>
  <a name="PRI_MYPY">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">PRI_MYPY</span>: <code>Final</code> =
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L361">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basevariable">
  
  
  <a name="mypy.build.T">
    
  </a>
  <a name="T">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">T</span> =
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L3263">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="mypy.build._build">
    
  </a>
  <a name="_build">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_build</span>(sources, options, alt_lib_path, flush_errors, fscache, stdout, stderr, extra_plugins):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L196">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">sources:</span><code>List[<wbr></wbr><a href="mypy.modulefinder.BuildSource.html">BuildSource</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">options:</span><code><a href="mypy.options.Options.html">Options</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">alt_lib_path:</span><code>Optional[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">flush_errors:</span><code>Callable[<wbr></wbr>[<wbr></wbr>List[<wbr></wbr>str], <wbr></wbr>bool], <wbr></wbr>None]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">fscache:</span><code>Optional[<wbr></wbr><a href="mypy.fscache.FileSystemCache.html">FileSystemCache</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">stdout:</span><code>TextIO</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">stderr:</span><code>TextIO</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">extra_plugins:</span><code>Sequence[<wbr></wbr><a href="mypy.plugin.Plugin.html">Plugin</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code><a href="mypy.build.BuildResult.html">BuildResult</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="mypy.build._cache_dir_prefix">
    
  </a>
  <a name="_cache_dir_prefix">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_cache_dir_prefix</span>(options):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L1117">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div>Get current cache directory (or file if id is given).<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">options:</span><code><a href="mypy.options.Options.html">Options</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction private">
  
  
  <a name="mypy.build._load_json_file">
    
  </a>
  <a name="_load_json_file">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">_load_json_file</span>(file, manager, log_success, log_error):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/build.py#L1085">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div>A simple helper to read a JSON file with logging.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">file:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">log_success:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">log_error:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Optional[<wbr></wbr>Dict[<wbr></wbr>str, <wbr></wbr>Any]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div>

      </div>
    </div>

    <footer class="navbar navbar-default">
  
  <div class="container">
    <a href="index.html">API Documentation</a> for <a href="https://github.com/python/mypy" class="projecthome">mypy-0.930</a>,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    21.2.2 at 2022-01-06 17:36:40.
  </div>
</footer>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>