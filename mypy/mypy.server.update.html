<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "DTD/xhtml1-strict.dtd">
<html>
  

  <head>
    
    <title>mypy.server.update</title>
    <meta name="generator" content="pydoctor 22.2.2.dev0"> 
        
    </meta>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=0.75" />
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="apidocs.css" />
    <link rel="stylesheet" type="text/css" href="extra.css" />
</head>

  <body>

    

    <nav class="navbar navbar-default">
  
  <div class="container">

    <div class="navbar-header">
      
      <div class="navlinks">
        <span class="navbar-brand">
          <a href="https://github.com/python/mypy" class="projecthome">mypy-0.930</a> <a href="index.html">API Documentation</a>
        </span>

        <a href="moduleIndex.html">
          Modules
        </a>

        <a href="classIndex.html">
          Classes
        </a>

        <a href="nameIndex.html">
          Names
        </a>

        <div id="search-box-container">
          <div class="input-group">
            <input id="search-box" type="search" name="search-query" placeholder="Search..." aria-label="Search" minlength="2" class="form-control" autocomplete="off" />
            
            <span class="input-group-btn">
              <a style="display: none;" class="btn btn-default" id="search-clear-button" title="Clear" onclick="clearSearch()"><img src="fonts/x-circle.svg" alt="Clear" /></a>
              <a class="btn btn-default" id="search-help-button" title="Help" onclick="toggleSearchHelpText()"><img src="fonts/info.svg" alt="Help" /></a>
            </span>
          </div>
        </div>

      </div>

      <div id="search-results-container" style="display: none;">
        <div>
          <span class="label label-default" id="search-docstrings-button">
            <a title="Search in docstrings" onclick="toggleSearchInDocstrings()">search in docstrings</a></span>
        </div>

        <noscript>
            <h1>Cannot search: JavaScript is not supported/enabled in your browser.</h1>
        </noscript>

        <div class="hint" id="search-help-box">
          <p class="rst-last">
      
            Search bar offers the following options:
            <ul>   
                <li>
                  <strong>Term presence.</strong> The below example searches for documents that 
                    must contain “foo”, might contain “bar” and must not contain “baz”: <code>+foo bar -baz</code>
                </li> 

                <li>
                  <strong>Wildcards.</strong> The below example searches for documents with words beginning with “foo”: <code>foo*</code>
                </li> 

                <li>
                  <strong>Search in specific fields.</strong> The following search matches all objects 
                  in "twisted.mail" that matches “search”: <code>+qname:twisted.mail.* +search</code>

                  <p>
                    Possible fields: 'name', 'qname' (fully qualified name), 'docstring', and 'kind'.
                    Last two fields are only applicable if "search in docstrings" is enabled.
                  </p>
                </li>

                <li>
                  <strong>Fuzzy matches.</strong> The following search matches all documents 
                  that have a word within 1 edit distance of “foo”: <code>foo~1</code>
                </li>
            </ul>

          </p>
        </div>

        <div id="search-status"> </div>
        
        <div class="warning" id="search-warn-box" style="display: none;">
          <p class="rst-last"><span id="search-warn"></span></p>
        </div>

        <table id="search-results">
          <!-- Filled dynamically by JS -->
        </table>
        
        <div style="margin-top: 8px;">
          <p>Results provided by <a href="https://lunrjs.com">Lunr.js</a></p>
        </div>
      </div>

    </div>
  </div>

  <script src="ajax.js" type="text/javascript"></script>
  <script src="search.js" type="text/javascript"></script>

</nav>

    

    <div class="container">

      <div class="page-header">
        <h1 class="module"><code><code><a href="index.html" class="internal-link">mypy</a></code><wbr></wbr>.<code><a href="mypy.server.html" class="internal-link" title="mypy.server">server</a></code><wbr></wbr>.<code><a href="mypy.server.update.html" class="internal-link" title="mypy.server.update">update</a></code></code></h1>
        <div id="showPrivate">
          <button class="btn btn-link" onclick="togglePrivate()">Toggle Private API</button>
        </div>
      </div>

      <div class="categoryHeader">
        module documentation
      </div>

      <div class="extrasDocstring">
        <a href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py" class="sourceLink">(source)</a>
        <p></p>
      </div>

      <div class="moduleDocstring">
        <div><p>Update build by processing changes using fine-grained dependencies.</p>
<p>Use fine-grained dependencies to update targets in other modules that
may be affected by externally-visible changes in the changed modules.</p>
<p>This forms the core of the fine-grained incremental daemon mode. This
module is not used at all by the 'classic' (non-daemon) incremental
mode.</p>
<p>Here is some motivation for this mode:</p>
<ul class="rst-simple">
<li>By keeping program state in memory between incremental runs, we
only have to process changed modules, not their dependencies. The
classic incremental mode has to deserialize the symbol tables of
all dependencies of changed modules, which can be slow for large
programs.</li>
<li>Fine-grained dependencies allow processing only the relevant parts
of modules indirectly affected by a change. Say, if only one function
in a large module is affected by a change in another module, only this
function is processed. The classic incremental mode always processes
an entire file as a unit, which is typically much slower.</li>
<li>It's possible to independently process individual modules within an
import cycle (SCC). Small incremental changes can be fast independent
of the size of the related SCC. In classic incremental mode, any change
within a SCC requires the entire SCC to be processed, which can slow
things down considerably.</li>
</ul>
<p>Some terms:</p>
<ul class="rst-simple">
<li>A <em>target</em> is a function/method definition or the top level of a module.
We refer to targets using their fully qualified name (e.g.
'mod.Cls.method'). Targets are the smallest units of processing during
fine-grained incremental checking.</li>
<li>A <em>trigger</em> represents the properties of a part of a program, and it
gets triggered/fired when these properties change. For example,
'&lt;mod.func&gt;' refers to a module-level function. It gets triggered if
the signature of the function changes, or if the function is removed,
for example.</li>
</ul>
<p>Some program state is maintained across multiple build increments in
memory:</p>
<ul class="rst-simple">
<li>The full ASTs of all modules are stored in memory all the time (this
includes the type map).</li>
<li>A fine-grained dependency map is maintained, which maps triggers to
affected program locations (these can be targets, triggers, or
classes). The latter determine what other parts of a program need to
be processed again due to a fired trigger.</li>
</ul>
<p>Here's a summary of how a fine-grained incremental program update happens:</p>
<ul class="rst-simple">
<li>Determine which modules have changes in their source code since the
previous update.</li>
<li>Process changed modules one at a time. Perform a separate full update
for each changed module, but only report the errors after all modules
have been processed, since the intermediate states can generate bogus
errors due to only seeing a partial set of changes.</li>
<li>Each changed module is processed in full. We parse the module, and
run semantic analysis to create a new AST and symbol table for the
module. Reuse the existing ASTs and symbol tables of modules that
have no changes in their source code. At the end of this stage, we have
two ASTs and symbol tables for the changed module (the old and the new
versions). The latter AST has not yet been type checked.</li>
<li>Take a snapshot of the old symbol table. This is used later to determine
which properties of the module have changed and which triggers to fire.</li>
<li>Merge the old AST with the new AST, preserving the identities of
externally visible AST nodes for which we can find a corresponding node
in the new AST. (Look at mypy.server.astmerge for the details.) This
way all external references to AST nodes in the changed module will
continue to point to the right nodes (assuming they still have a valid
target).</li>
<li>Type check the new module.</li>
<li>Take another snapshot of the symbol table of the changed module.
Look at the differences between the old and new snapshots to determine
which parts of the changed modules have changed. The result is a set of
fired triggers.</li>
<li>Using the dependency map and the fired triggers, decide which other
targets have become stale and need to be reprocessed.</li>
<li>Create new fine-grained dependencies for the changed module. We don't
garbage collect old dependencies, since extra dependencies are relatively
harmless (they take some memory and can theoretically slow things down
a bit by causing redundant work). This is implemented in
mypy.server.deps.</li>
<li>Strip the stale AST nodes that we found above. This returns them to a
state resembling the end of semantic analysis pass 1. We'll run semantic
analysis again on the existing AST nodes, and since semantic analysis
is not idempotent, we need to revert some changes made during semantic
analysis. This is implemented in mypy.server.aststrip.</li>
<li>Run semantic analyzer passes 2 and 3 on the stale AST nodes, and type
check them. We also need to do the symbol table snapshot comparison
dance to find any changes, and we need to merge ASTs to preserve AST node
identities.</li>
<li>If some triggers haven been fired, continue processing and repeat the
previous steps until no triggers are fired.</li>
</ul>
<p>This is module is tested using end-to-end fine-grained incremental mode
test cases (test-data/unit/fine-grained*.test).</p>
</div>
      </div>

      <div id="splitTables">
        <table class="children sortable" id="id564">
  
  
  <tr class="class">
    
    <td>Class</td>
    <td><code><a href="mypy.server.update.FineGrainedBuildManager.html" class="internal-link" title="mypy.server.update.FineGrainedBuildManager">​Fine​Grained​Build​Manager</a></code></td>
    <td><span class="undocumented">No class docstring; 0/12 instance variable, 6/6 methods documented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#calculate_active_triggers" class="internal-link" title="mypy.server.update.calculate_active_triggers">calculate​_active​_triggers</a></code></td>
    <td>Determine activated triggers by comparing old and new symbol tables.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#dedupe_modules" class="internal-link" title="mypy.server.update.dedupe_modules">dedupe​_modules</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#delete_module" class="internal-link" title="mypy.server.update.delete_module">delete​_module</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#ensure_deps_loaded" class="internal-link" title="mypy.server.update.ensure_deps_loaded">ensure​_deps​_loaded</a></code></td>
    <td>Ensure that the dependencies on a module are loaded.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#ensure_trees_loaded" class="internal-link" title="mypy.server.update.ensure_trees_loaded">ensure​_trees​_loaded</a></code></td>
    <td>Ensure that the modules in initial and their deps have loaded trees.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#find_relative_leaf_module" class="internal-link" title="mypy.server.update.find_relative_leaf_module">find​_relative​_leaf​_module</a></code></td>
    <td>Find a module in a list that directly imports no other module in the list.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#find_symbol_tables_recursive" class="internal-link" title="mypy.server.update.find_symbol_tables_recursive">find​_symbol​_tables​_recursive</a></code></td>
    <td>Find all nested symbol tables.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#find_targets_recursive" class="internal-link" title="mypy.server.update.find_targets_recursive">find​_targets​_recursive</a></code></td>
    <td>Find names of all targets that need to reprocessed, given some triggers.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#find_unloaded_deps" class="internal-link" title="mypy.server.update.find_unloaded_deps">find​_unloaded​_deps</a></code></td>
    <td>Find all the deps of the nodes in initial that haven't had their tree loaded.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#fix_fg_dependencies" class="internal-link" title="mypy.server.update.fix_fg_dependencies">fix​_fg​_dependencies</a></code></td>
    <td>Populate the dependencies with stuff that build may have missed</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#get_module_to_path_map" class="internal-link" title="mypy.server.update.get_module_to_path_map">get​_module​_to​_path​_map</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#get_sources" class="internal-link" title="mypy.server.update.get_sources">get​_sources</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#is_verbose" class="internal-link" title="mypy.server.update.is_verbose">is​_verbose</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#lookup_target" class="internal-link" title="mypy.server.update.lookup_target">lookup​_target</a></code></td>
    <td>Look up a target by fully-qualified name.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#propagate_changes_using_dependencies" class="internal-link" title="mypy.server.update.propagate_changes_using_dependencies">propagate​_changes​_using​_dependencies</a></code></td>
    <td>Transitively rechecks targets based on triggers and the dependency map.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#refresh_suppressed_submodules" class="internal-link" title="mypy.server.update.refresh_suppressed_submodules">refresh​_suppressed​_submodules</a></code></td>
    <td>Look for submodules that are now suppressed in target package.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#replace_modules_with_new_variants" class="internal-link" title="mypy.server.update.replace_modules_with_new_variants">replace​_modules​_with​_new​_variants</a></code></td>
    <td>Replace modules with newly builds versions.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#reprocess_nodes" class="internal-link" title="mypy.server.update.reprocess_nodes">reprocess​_nodes</a></code></td>
    <td>Reprocess a set of nodes within a single module.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#target_from_node" class="internal-link" title="mypy.server.update.target_from_node">target​_from​_node</a></code></td>
    <td>Return the target name corresponding to a deferred node.</td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#update_deps" class="internal-link" title="mypy.server.update.update_deps">update​_deps</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="function">
    
    <td>Function</td>
    <td><code><a href="#update_module_isolated" class="internal-link" title="mypy.server.update.update_module_isolated">update​_module​_isolated</a></code></td>
    <td>Build a new version of one changed module only.</td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#INIT_SUFFIXES" class="internal-link" title="mypy.server.update.INIT_SUFFIXES">INIT​_SUFFIXES</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#MAX_ITER" class="internal-link" title="mypy.server.update.MAX_ITER">MAX​_ITER</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="constant">
    
    <td>Constant</td>
    <td><code><a href="#SENSITIVE_INTERNAL_MODULES" class="internal-link" title="mypy.server.update.SENSITIVE_INTERNAL_MODULES">SENSITIVE​_INTERNAL​_MODULES</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#BlockedUpdate" class="internal-link" title="mypy.server.update.BlockedUpdate">​Blocked​Update</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#NormalUpdate" class="internal-link" title="mypy.server.update.NormalUpdate">​Normal​Update</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr><tr class="variable">
    
    <td>Variable</td>
    <td><code><a href="#UpdateResult" class="internal-link" title="mypy.server.update.UpdateResult">​Update​Result</a></code></td>
    <td><span class="undocumented">Undocumented</span></td>
  </tr>
</table>
        

          
      </div>

      <div id="childList">

        <div class="basefunction">
  
  
  <a name="mypy.server.update.calculate_active_triggers">
    
  </a>
  <a name="calculate_active_triggers">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">calculate_active_triggers</span>(manager, old_snapshots, new_modules):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L714">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Determine activated triggers by comparing old and new symbol tables.</p>
<p>For example, if only the signature of function m.f is different in the new
symbol table, return {'&lt;m.f&gt;'}.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html" class="internal-link" title="mypy.build.BuildManager">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">old​_snapshots:</span><code>Dict[<wbr></wbr>str, <wbr></wbr>Dict[<wbr></wbr>str, <wbr></wbr><a href="mypy.server.astdiff.html#SnapshotItem" class="internal-link" title="mypy.server.astdiff.SnapshotItem">SnapshotItem</a>]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">new​_modules:</span><code>Dict[<wbr></wbr>str, <wbr></wbr>Optional[<wbr></wbr><a href="mypy.nodes.MypyFile.html" class="internal-link" title="mypy.nodes.MypyFile">MypyFile</a>]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Set[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.dedupe_modules">
    
  </a>
  <a name="dedupe_modules">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">dedupe_modules</span>(modules):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L689">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">modules:</span><code>List[<wbr></wbr>Tuple[<wbr></wbr>str, <wbr></wbr>str]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>List[<wbr></wbr>Tuple[<wbr></wbr>str, <wbr></wbr>str]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.delete_module">
    
  </a>
  <a name="delete_module">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">delete_module</span>(module_id, path, graph, manager):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L664">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">module​_id:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">path:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">graph:</span><code><a href="mypy.build.html#Graph" class="internal-link" title="mypy.build.Graph">Graph</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html" class="internal-link" title="mypy.build.BuildManager">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.ensure_deps_loaded">
    
  </a>
  <a name="ensure_deps_loaded">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">ensure_deps_loaded</span>(module, deps, graph):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L457">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Ensure that the dependencies on a module are loaded.</p>
<p>Dependencies are loaded into the 'deps' dictionary.</p>
<p>This also requires loading dependencies from any parent modules,
since dependencies will get stored with parent modules when a module
doesn't exist.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">module:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">deps:</span><code>Dict[<wbr></wbr>str, <wbr></wbr>Set[<wbr></wbr>str]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">graph:</span><code>Dict[<wbr></wbr>str, <wbr></wbr><a href="mypy.build.State.html" class="internal-link" title="mypy.build.State">State</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.ensure_trees_loaded">
    
  </a>
  <a name="ensure_trees_loaded">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">ensure_trees_loaded</span>(manager, graph, initial):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L477">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div>Ensure that the modules in initial and their deps have loaded trees.<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html" class="internal-link" title="mypy.build.BuildManager">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">graph:</span><code>Dict[<wbr></wbr>str, <wbr></wbr><a href="mypy.build.State.html" class="internal-link" title="mypy.build.State">State</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">initial:</span><code>Sequence[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.find_relative_leaf_module">
    
  </a>
  <a name="find_relative_leaf_module">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">find_relative_leaf_module</span>(modules, graph):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L637">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Find a module in a list that directly imports no other module in the list.</p>
<p>If no such module exists, return the lexicographically first module from the list.
Always return one of the items in the modules list.</p>
<dl class="rst-docutils">
<dt>NOTE: If both 'abc' and 'typing' have changed, an effect of the above rule is that</dt>
<dd>we prefer 'abc', even if both are in the same SCC. This works around a false
positive in 'typing', at least in tests.</dd>
<dt>Args:</dt>
<dd>modules: List of (module, path) tuples (non-empty)
graph: Program import graph that contains all modules in the module list</dd>
</dl>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">modules:</span><code>List[<wbr></wbr>Tuple[<wbr></wbr>str, <wbr></wbr>str]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">graph:</span><code><a href="mypy.build.html#Graph" class="internal-link" title="mypy.build.Graph">Graph</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Tuple[<wbr></wbr>str, <wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.find_symbol_tables_recursive">
    
  </a>
  <a name="find_symbol_tables_recursive">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">find_symbol_tables_recursive</span>(prefix, symbols):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L999">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Find all nested symbol tables.</p>
<dl class="rst-docutils">
<dt>Args:</dt>
<dd><dl class="rst-first rst-docutils">
<dt>prefix: Full name prefix (used for return value keys and to filter result so that</dt>
<dd>cross references to other modules aren't included)</dd>
</dl>
<p class="rst-last">symbols: Root symbol table</p>
</dd>
</dl>
<p>Returns a dictionary from full name to corresponding symbol table.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">prefix:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">symbols:</span><code><a href="mypy.nodes.SymbolTable.html" class="internal-link" title="mypy.nodes.SymbolTable">SymbolTable</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Dict[<wbr></wbr>str, <wbr></wbr><a href="mypy.nodes.SymbolTable.html" class="internal-link" title="mypy.nodes.SymbolTable">SymbolTable</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.find_targets_recursive">
    
  </a>
  <a name="find_targets_recursive">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">find_targets_recursive</span>(manager, graph, triggers, deps, up_to_date_modules):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L846">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Find names of all targets that need to reprocessed, given some triggers.</p>
<dl class="rst-docutils">
<dt>Returns: A tuple containing a:</dt>
<dd><ul class="rst-first rst-last rst-simple">
<li>Dictionary from module id to a set of stale targets.</li>
<li>A set of module ids for unparsed modules with stale targets.</li>
</ul>
</dd>
</dl>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html" class="internal-link" title="mypy.build.BuildManager">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">graph:</span><code><a href="mypy.build.html#Graph" class="internal-link" title="mypy.build.Graph">Graph</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">triggers:</span><code>Set[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">deps:</span><code>Dict[<wbr></wbr>str, <wbr></wbr>Set[<wbr></wbr>str]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">up​_to​_date​_modules:</span><code>Set[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Tuple[<wbr></wbr>Dict[<wbr></wbr>str, <wbr></wbr>Set[<wbr></wbr><a href="mypy.checker.html#FineGrainedDeferredNode" class="internal-link" title="mypy.checker.FineGrainedDeferredNode">FineGrainedDeferredNode</a>]], <wbr></wbr>Set[<wbr></wbr>str], <wbr></wbr>Set[<wbr></wbr><a href="mypy.nodes.TypeInfo.html" class="internal-link" title="mypy.nodes.TypeInfo">TypeInfo</a>]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.find_unloaded_deps">
    
  </a>
  <a name="find_unloaded_deps">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">find_unloaded_deps</span>(manager, graph, initial):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L430">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Find all the deps of the nodes in initial that haven't had their tree loaded.</p>
<p>The key invariant here is that if a module is loaded, so are all
of their dependencies. This means that when we encounter a loaded
module, we don't need to explore its dependencies.  (This
invariant is slightly violated when dependencies are added, which
can be handled by calling find_unloaded_deps directly on the new
dependencies.)</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html" class="internal-link" title="mypy.build.BuildManager">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">graph:</span><code>Dict[<wbr></wbr>str, <wbr></wbr><a href="mypy.build.State.html" class="internal-link" title="mypy.build.State">State</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">initial:</span><code>Sequence[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>List[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.fix_fg_dependencies">
    
  </a>
  <a name="fix_fg_dependencies">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">fix_fg_dependencies</span>(manager, deps):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L488">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div>Populate the dependencies with stuff that build may have missed<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html" class="internal-link" title="mypy.build.BuildManager">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">deps:</span><code>Dict[<wbr></wbr>str, <wbr></wbr>Set[<wbr></wbr>str]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.get_module_to_path_map">
    
  </a>
  <a name="get_module_to_path_map">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">get_module_to_path_map</span>(graph):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L699">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">graph:</span><code><a href="mypy.build.html#Graph" class="internal-link" title="mypy.build.Graph">Graph</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Dict[<wbr></wbr>str, <wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.get_sources">
    
  </a>
  <a name="get_sources">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">get_sources</span>(fscache, modules, changed_modules):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L704">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">fscache:</span><code><a href="mypy.fscache.FileSystemCache.html" class="internal-link" title="mypy.fscache.FileSystemCache">FileSystemCache</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">modules:</span><code>Dict[<wbr></wbr>str, <wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">changed​_modules:</span><code>List[<wbr></wbr>Tuple[<wbr></wbr>str, <wbr></wbr>str]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>List[<wbr></wbr><a href="mypy.modulefinder.BuildSource.html" class="internal-link" title="mypy.modulefinder.BuildSource">BuildSource</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.is_verbose">
    
  </a>
  <a name="is_verbose">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">is_verbose</span>(manager):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L1116">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html" class="internal-link" title="mypy.build.BuildManager">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>bool</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.lookup_target">
    
  </a>
  <a name="lookup_target">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">lookup_target</span>(manager, target):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L1036">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Look up a target by fully-qualified name.</p>
<p>The first item in the return tuple is a list of deferred nodes that
needs to be reprocessed. If the target represents a TypeInfo corresponding
to a protocol, return it as a second item in the return tuple, otherwise None.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html" class="internal-link" title="mypy.build.BuildManager">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">target:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Tuple[<wbr></wbr>List[<wbr></wbr><a href="mypy.checker.html#FineGrainedDeferredNode" class="internal-link" title="mypy.checker.FineGrainedDeferredNode">FineGrainedDeferredNode</a>], <wbr></wbr>Optional[<wbr></wbr><a href="mypy.nodes.TypeInfo.html" class="internal-link" title="mypy.nodes.TypeInfo">TypeInfo</a>]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.propagate_changes_using_dependencies">
    
  </a>
  <a name="propagate_changes_using_dependencies">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">propagate_changes_using_dependencies</span>(manager, graph, deps, triggered, up_to_date_modules, targets_with_errors, processed_targets):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L783">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Transitively rechecks targets based on triggers and the dependency map.</p>
<p>Returns a list (module id, path) tuples representing modules that contain
a target that needs to be reprocessed but that has not been parsed yet.</p>
<p>Processed targets should be appended to processed_targets (used in tests only,
to test the order of processing targets).</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html" class="internal-link" title="mypy.build.BuildManager">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">graph:</span><code>Dict[<wbr></wbr>str, <wbr></wbr><a href="mypy.build.State.html" class="internal-link" title="mypy.build.State">State</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">deps:</span><code>Dict[<wbr></wbr>str, <wbr></wbr>Set[<wbr></wbr>str]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">triggered:</span><code>Set[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">up​_to​_date​_modules:</span><code>Set[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">targets​_with​_errors:</span><code>Set[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">processed​_targets:</span><code>List[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>List[<wbr></wbr>Tuple[<wbr></wbr>str, <wbr></wbr>str]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.refresh_suppressed_submodules">
    
  </a>
  <a name="refresh_suppressed_submodules">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">refresh_suppressed_submodules</span>(module, path, deps, graph, fscache, refresh_file):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L1154">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Look for submodules that are now suppressed in target package.</p>
<p>If a submodule a.b gets added, we need to mark it as suppressed
in modules that contain "from a import b". Previously we assumed
that 'a.b' is not a module but a regular name.</p>
<p>This is only relevant when following imports normally.</p>
<dl class="rst-docutils">
<dt>Args:</dt>
<dd>module: target package in which to look for submodules
path: path of the module
refresh_file: function that reads the AST of a module (returns error messages)</dd>
</dl>
<p>Return a list of errors from refresh_file() if it was called. If the
return value is None, we didn't call refresh_file().</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">module:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">path:</span><code>Optional[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">deps:</span><code>Dict[<wbr></wbr>str, <wbr></wbr>Set[<wbr></wbr>str]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">graph:</span><code><a href="mypy.build.html#Graph" class="internal-link" title="mypy.build.Graph">Graph</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">fscache:</span><code><a href="mypy.fscache.FileSystemCache.html" class="internal-link" title="mypy.fscache.FileSystemCache">FileSystemCache</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">refresh​_file:</span><code>Callable[<wbr></wbr>[<wbr></wbr>str, <wbr></wbr>str], <wbr></wbr>List[<wbr></wbr>str]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Optional[<wbr></wbr>List[<wbr></wbr>str]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.replace_modules_with_new_variants">
    
  </a>
  <a name="replace_modules_with_new_variants">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">replace_modules_with_new_variants</span>(manager, graph, old_modules, new_modules):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L759">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Replace modules with newly builds versions.</p>
<p>Retain the identities of externally visible AST nodes in the
old ASTs so that references to the affected modules from other
modules will still be valid (unless something was deleted or
replaced with an incompatible definition, in which case there
will be dangling references that will be handled by
propagate_changes_using_dependencies).</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html" class="internal-link" title="mypy.build.BuildManager">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">graph:</span><code>Dict[<wbr></wbr>str, <wbr></wbr><a href="mypy.build.State.html" class="internal-link" title="mypy.build.State">State</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">old​_modules:</span><code>Dict[<wbr></wbr>str, <wbr></wbr>Optional[<wbr></wbr><a href="mypy.nodes.MypyFile.html" class="internal-link" title="mypy.nodes.MypyFile">MypyFile</a>]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">new​_modules:</span><code>Dict[<wbr></wbr>str, <wbr></wbr>Optional[<wbr></wbr><a href="mypy.nodes.MypyFile.html" class="internal-link" title="mypy.nodes.MypyFile">MypyFile</a>]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.reprocess_nodes">
    
  </a>
  <a name="reprocess_nodes">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">reprocess_nodes</span>(manager, graph, module_id, nodeset, deps, processed_targets):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L906">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Reprocess a set of nodes within a single module.</p>
<p>Return fired triggers.</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html" class="internal-link" title="mypy.build.BuildManager">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">graph:</span><code>Dict[<wbr></wbr>str, <wbr></wbr><a href="mypy.build.State.html" class="internal-link" title="mypy.build.State">State</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">module​_id:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">nodeset:</span><code>Set[<wbr></wbr><a href="mypy.checker.html#FineGrainedDeferredNode" class="internal-link" title="mypy.checker.FineGrainedDeferredNode">FineGrainedDeferredNode</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">deps:</span><code>Dict[<wbr></wbr>str, <wbr></wbr>Set[<wbr></wbr>str]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">processed​_targets:</span><code>List[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Set[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.target_from_node">
    
  </a>
  <a name="target_from_node">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">target_from_node</span>(module, node):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L1120">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Return the target name corresponding to a deferred node.</p>
<dl class="rst-docutils">
<dt>Args:</dt>
<dd>module: Must be module id of the module that defines 'node'</dd>
</dl>
<p>Returns the target name, or None if the node is not a valid target in the given
module (for example, if it's actually defined in another module).</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">module:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">node:</span><code>Union[<wbr></wbr><a href="mypy.nodes.FuncDef.html" class="internal-link" title="mypy.nodes.FuncDef">FuncDef</a>, <wbr></wbr><a href="mypy.nodes.MypyFile.html" class="internal-link" title="mypy.nodes.MypyFile">MypyFile</a>, <wbr></wbr><a href="mypy.nodes.OverloadedFuncDef.html" class="internal-link" title="mypy.nodes.OverloadedFuncDef">OverloadedFuncDef</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code>Optional[<wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.update_deps">
    
  </a>
  <a name="update_deps">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">update_deps</span>(module_id, nodes, graph, deps, options):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L1018">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p class="undocumented">Undocumented</p><table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">module​_id:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">nodes:</span><code>List[<wbr></wbr><a href="mypy.checker.html#FineGrainedDeferredNode" class="internal-link" title="mypy.checker.FineGrainedDeferredNode">FineGrainedDeferredNode</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">graph:</span><code>Dict[<wbr></wbr>str, <wbr></wbr><a href="mypy.build.State.html" class="internal-link" title="mypy.build.State">State</a>]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">deps:</span><code>Dict[<wbr></wbr>str, <wbr></wbr>Set[<wbr></wbr>str]]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">options:</span><code><a href="mypy.options.Options.html" class="internal-link" title="mypy.options.Options">Options</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="basefunction">
  
  
  <a name="mypy.server.update.update_module_isolated">
    
  </a>
  <a name="update_module_isolated">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-keyword">def</span> <span class="py-defname">update_module_isolated</span>(module, path, manager, previous_modules, graph, force_removed):
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L518">
      
      (source)
    </a>
  </div>
  <div class="docstring functionBody">
    
    
    <div><p>Build a new version of one changed module only.</p>
<p>Don't propagate changes to elsewhere in the program. Raise CompileError on
encountering a blocking error.</p>
<dl class="rst-docutils">
<dt>Args:</dt>
<dd><p class="rst-first">module: Changed module (modified, created or deleted)
path: Path of the changed module
manager: Build manager
graph: Build graph
force_removed: If True, consider the module removed from the build even it the</p>
<blockquote class="rst-last">
file exists</blockquote>
</dd>
</dl>
<p>Returns a named tuple describing the result (see above for details).</p>
<table class="fieldTable"><tr class="fieldStart"><td class="fieldName" colspan="2">Parameters</td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">module:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">path:</span><code>str</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">manager:</span><code><a href="mypy.build.BuildManager.html" class="internal-link" title="mypy.build.BuildManager">BuildManager</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">previous​_modules:</span><code>Dict[<wbr></wbr>str, <wbr></wbr>str]</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">graph:</span><code><a href="mypy.build.html#Graph" class="internal-link" title="mypy.build.Graph">Graph</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr><td class="fieldArgContainer"><span class="fieldArg">force​_removed:</span><code>bool</code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr><tr class="fieldStart"><td class="fieldName" colspan="2">Returns</td></tr><tr><td class="fieldArgContainer"><code><a href="#UpdateResult" class="internal-link" title="mypy.server.update.UpdateResult">UpdateResult</a></code></td><td class="fieldArgDesc"><span class="undocumented">Undocumented</span></td></tr></table></div>
  </div>
</div><div class="baseconstant">
  
  
  <a name="mypy.server.update.INIT_SUFFIXES">
    
  </a>
  <a name="INIT_SUFFIXES">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">INIT_SUFFIXES</span>: <code>tuple[<wbr></wbr>str, <wbr></wbr><span class="rst-variable-ellipsis">...</span>]</code> =
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L1144">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>(<wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">/__init__.py</span><span class="rst-variable-quote">'</span>, <wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">/__init__.pyi</span><span class="rst-variable-quote">'</span>)</code></pre></td></tr></table>
  </div>
</div><div class="baseconstant">
  
  
  <a name="mypy.server.update.MAX_ITER">
    
  </a>
  <a name="MAX_ITER">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">MAX_ITER</span>: <code>int</code> =
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L151">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>1000</code></pre></td></tr></table>
  </div>
</div><div class="baseconstant">
  
  
  <a name="mypy.server.update.SENSITIVE_INTERNAL_MODULES">
    
  </a>
  <a name="SENSITIVE_INTERNAL_MODULES">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">SENSITIVE_INTERNAL_MODULES</span> =
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L153">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    <table class="valueTable"><tr class="fieldStart"><td class="fieldName">Value</td></tr><tr><td><pre class="constant-value"><code>tuple(<wbr></wbr><a href="mypy.semanal_main.html#core_modules" class="internal-link" title="mypy.semanal_main.core_modules">core_modules</a>)+(<wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">mypy_extensions</span><span class="rst-variable-quote">'</span>, <wbr></wbr><span class="rst-variable-quote">'</span><span class="rst-variable-string">typing_extensions</span><span class="rst-variable-quote">'</span>)</code></pre></td></tr></table>
  </div>
</div><div class="basevariable">
  
  
  <a name="mypy.server.update.BlockedUpdate">
    
  </a>
  <a name="BlockedUpdate">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">BlockedUpdate</span> =
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L510">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="basevariable">
  
  
  <a name="mypy.server.update.NormalUpdate">
    
  </a>
  <a name="NormalUpdate">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">NormalUpdate</span> =
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L503">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div><div class="basevariable">
  
  
  <a name="mypy.server.update.UpdateResult">
    
  </a>
  <a name="UpdateResult">
    
  </a>
  <div class="functionHeader">
    
    <span class="py-defname">UpdateResult</span> =
    <a class="sourceLink" href="https://github.com/python/mypy/tree/v0.930/mypy/server/update.py#L515">
      
      (source)
    </a>
  </div>
  <div class="functionBody">
    
    
    <div><p class="undocumented">Undocumented</p></div>
    
  </div>
</div>

      </div>
    </div>

    <footer class="navbar navbar-default">
  
  <div class="container">
    <a href="index.html">API Documentation</a> for <a href="https://github.com/python/mypy" class="projecthome">mypy-0.930</a>,
  generated by <a href="https://github.com/twisted/pydoctor/">pydoctor</a>
    22.2.2.dev0 at 2022-03-04 05:57:16.
  </div>
</footer>

    <script src="pydoctor.js" type="text/javascript"></script>

  </body>
</html>